(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["ModuleFBXGeomFastParser"]=e():t["ModuleFBXGeomFastParser"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="fae3")}({"0063":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static decodeText(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,s=t.length;n<s;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(r){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}static resolveURL(t,e){return"string"!==typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}e.LoaderUtils=n},"026b":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("5b39"),s=r("f689"),i=r("f689"),a=r("937b"),o=r("9259"),l=r("8b17");class h{constructor(){this.m_loader=new n.HttpFileLoader,this.m_parseOnLoad=null,this.m_parseIndex=0,this.m_url="",this.m_tidGeom=-1,this.m_tidBin=-1}load(t,e,r=null,n=null){this.m_loader.load(t,(t,r)=>{let n=new Map,s=this.parseGeometry(t,r);for(let[e,i]of s)n.set(e,i.toGeometryModel());null!=e&&e(n,r)},r,(t,e)=>{null!=n&&n(t,e)})}parseGeometry(t,e){let r;if(i.isFbxFormatBinary(t))this.m_binParser=new a.BufferBinaryParser,r=this.m_binParser.parse(t);else{const e=s.convertArrayBufferToString(t);if(!s.isFbxFormatASCII(e))throw new Error("FBXBufferLoader: Unknown format.");if(s.getFbxVersion(e)<7e3)throw new Error("FBXBufferLoader: FBX version not supported, FileVersion: "+s.getFbxVersion(e));r=(new o.TextParser).parse(e)}return this.m_fbxTreeBufParser=new l.FBXTreeBufferParser,this.m_fbxTreeBufParser.parse(r,this.m_binParser.getReader())}loadBySteps(t,e,r=null,n=null){null==this.m_fbxTreeBufParser&&this.m_loader.load(t,(t,r)=>{this.m_parseOnLoad=e,this.m_parseIndex=0,this.m_url=r,this.parseGeometryBySteps(t,r)},r,(t,e)=>{null!=n&&n(t,e)})}parseBufBySteps(t,e,r){this.m_parseOnLoad=r,this.m_parseIndex=0,this.m_url=e,this.parseGeometryBySteps(t,e)}updateGeomParse(){let t=50;if(this.m_tidGeom>-1&&clearTimeout(this.m_tidGeom),null!=this.m_fbxTreeBufParser&&this.m_fbxTreeBufParser.isParsing()){this.m_fbxTreeBufParser.getGeomBufId();let e=this.m_fbxTreeBufParser.parseGeomBufNext();this.m_parseIndex++;let r=this.m_fbxTreeBufParser.getParseTotal(),n=this.m_parseOnLoad;this.m_parseIndex<this.m_fbxTreeBufParser.getParseTotal()?this.m_tidGeom=setTimeout(this.updateGeomParse.bind(this),t):(this.m_parseOnLoad=null,this.m_fbxTreeBufParser=null),n(e.toGeometryModel(),e,this.m_parseIndex-1,r,this.m_url)}}startupParseGeom(){this.m_tidGeom=setTimeout(this.updateGeomParse.bind(this),30)}parseModelAt(t){}updateBinParse(){this.m_tidBin>-1&&clearTimeout(this.m_tidBin);let t=20;null!=this.m_binParser&&(this.m_binParser.parseNext(),this.m_binParser.isParsing()?this.m_tidBin=setTimeout(this.updateBinParse.bind(this),t):(this.m_fbxTreeBufParser=new l.FBXTreeBufferParser,this.m_fbxTreeBufParser.parseBegin(this.m_binParser.getFBXTree(),this.m_binParser.getReader()),null!=this.m_fbxTreeBufParser&&this.startupParseGeom(),this.m_binParser=null))}parseGeometryBySteps(t,e){let r;if(i.isFbxFormatBinary(t))this.m_binParser=new a.BufferBinaryParser,this.m_binParser.parseBegin(t),this.m_tidBin=setTimeout(this.updateBinParse.bind(this),18);else{const e=s.convertArrayBufferToString(t);if(!s.isFbxFormatASCII(e))throw new Error("FBXBufferLoader: Unknown format.");if(s.getFbxVersion(e)<7e3)throw new Error("FBXBufferLoader: FBX version not supported, FileVersion: "+s.getFbxVersion(e));r=(new o.TextParser).parse(e),this.m_fbxTreeBufParser=new l.FBXTreeBufferParser,this.m_fbxTreeBufParser.parseBegin(r,null)}}}e.FBXBufferLoader=h},1280:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("f689"),s=r("8310"),i=r("5ab6"),a=r("c758");class o{constructor(){this.m_parseTotal=0,this.m_reader=null,this.m_bufPpt=new a.BufPropertyParser,this.m_egd=new i.ElementGeomData}setReader(t){this.m_reader=t}parseGeomBuf(t,e,r,n=!0){const s=new Map;if("Geometry"in e.Objects){const n=e.Objects.Geometry;let i=0,a=[],o=[];this.m_idLst=a,this.m_nodeIDList=o;for(const t in n)a.push(parseInt(t)),o.push(t);for(let l=0;l<a.length;++l){i=a[l];const h=r.get(i),u=this.parseGeometryBuffer(h,n[o[l]],t,e);s.set(i,u)}}return s}parseGeomBufBegin(t,e,r){if("Geometry"in e.Objects){this.m_deformers=t,this.m_fbxTree=e,this.m_connections=r,this.m_idLst=[],this.m_nodeIDList=[];const n=e.Objects.Geometry;for(const t in n){let e=n[t];"Mesh"==e.attrType&&(this.m_idLst.push(parseInt(t)),this.m_nodeIDList.push(t))}this.m_parseTotal=this.m_idLst.length}}getGeomBufId(){return this.isParsing()?this.m_idLst[this.m_idLst.length-1]:-1}parseGeomBufNext(){if(this.isParsing()){const t=this.m_fbxTree.Objects.Geometry;let e=this.m_idLst.pop(),r=this.m_nodeIDList.pop();const n=this.m_connections.get(e);let s=this.parseGeometryBuffer(n,t[r],this.m_deformers,this.m_fbxTree);return null!=s&&(s.ID=r,s.id=e),this.isParsing()||(this.m_reader=null),s}return null}parseGeomBufAt(t){if(t>=0&&t<this.m_idLst.length&&this.isParsing()){const e=this.m_fbxTree.Objects.Geometry;let r=this.m_idLst[t],n=this.m_nodeIDList[t];const s=this.m_connections.get(r);let i=this.parseGeometryBuffer(s,e[n],this.m_deformers,this.m_fbxTree);return null!=i&&(i.ID=n,i.id=r),this.isParsing()||(this.m_reader=null),i}return null}isParsing(){return null!=this.m_idLst&&this.m_idLst.length>0}getParseTotal(){return this.m_parseTotal}parseGeometryBuffer(t,e,r,n){switch(e.attrType){case"Mesh":return this.parseMeshGeometryBuffer(t,e,r,n);case"NurbsCurve":return this.parseNurbsGeometry(e)}}parseMeshGeometryBuffer(t,e,r,n){const s=this.parseGeoNode(e),i=this.getBufObj(s);return i}parseGeoNode(t){const e={};if(e.vertexPositions=void 0!==t.Vertices?t.Vertices.a:[],e.vertexIndices=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],t.LayerElementNormal&&(e.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){e.uv=[];let r=0;while(t.LayerElementUV[r])t.LayerElementUV[r].UV&&e.uv.push(this.parseUVs(t.LayerElementUV[r])),r++}return e.weightTable={},e}parseData(t){return this.m_bufPpt.parseDirec(this.m_reader,t)}getBufObj(t){let e=0,r=0,i=new Array(36),a=new Array(36),o=new Array(36),l=null,h=[],u=[],c=t.uv,f=5==t.vertexPositions.length;if(f)return t.vertexIndices=this.parseData(t.vertexIndices),t.vertexPositions=this.parseData(t.vertexPositions),null!=t.normal||void 0!=t.normal?(t.normal.buffer=this.parseData(t.normal.buffer),t.normal.indices=this.parseData(t.normal.indices)):t.normal=null,null!=c&&c.length>0&&(c[0].buffer=this.parseData(c[0].buffer)),this.m_egd.createBufObject(t);const p=new s.FBXBufferObject;p.isEntity=!0;let d=t.vertexIndices,m=t.vertexIndices.length,y=Date.now(),g=0,_=0;for(let n=0;n<m;++n)r++,d[n]<0&&(_+=r-2,r=0);let x=9*_;p.vertex=new Float32Array(x),p.normal=new Float32Array(x);let v=p.uvs,w=0,b=null;if(t.uv){w=t.uv.length,b=t.uv,l=[];for(let t=0;t<w;++t)l.push(new Array(36)),v[t]=new Float32Array(6*_);p.uvs=v}Date.now();r=0;for(let s=0;s<m;++s){let c=!1,f=d[s];f<0&&(f^=-1,c=!0);let m=3*r;const y=3*f;if(i[m]=y,i[m+1]=y+1,i[m+2]=y+2,t.normal){const r=n.getData(s,e,f,t.normal);a[m]=r[0],a[m+1]=r[1],a[m+2]=r[2]}if(null!=b){m=2*r;for(let t=0;t<w;++t){const r=n.getData(s,e,f,b[t]);l[t][m]=r[0],l[t][m+1]=r[1]}}r++,c&&(this.genFace(p,t,i,g,a,o,l,h,u,r),e++,r=0)}Date.now();return p}genFace(t,e,r,n,s,i,a,o,l,h){let u=e.vertexPositions,c=t.vertex,f=t.normal,p=t.uvs,d=t.i3,m=t.i2,y=null!=e.normal,g=null!=e.uv;for(let _=2;_<h;_++){if(c[d]=u[r[0]],c[d+1]=u[r[1]],c[d+2]=u[r[2]],c[d+3]=u[r[3*(_-1)]],c[d+4]=u[r[3*(_-1)+1]],c[d+5]=u[r[3*(_-1)+2]],c[d+6]=u[r[3*_]],c[d+7]=u[r[3*_+1]],c[d+8]=u[r[3*_+2]],y&&(f[d]=s[0],f[d+1]=s[1],f[d+2]=s[2],f[d+3]=s[3*(_-1)],f[d+4]=s[3*(_-1)+1],f[d+5]=s[3*(_-1)+2],f[d+6]=s[3*_],f[d+7]=s[3*_+1],f[d+8]=s[3*_+2]),g){const t=e.uv;for(let e=0,r=t.length;e<r;e++){const t=a[e],r=p[e];r[m]=t[0],r[m+1]=t[1],r[m+2]=t[2*(_-1)],r[m+3]=t[2*(_-1)+1],r[m+4]=t[2*_],r[m+5]=t[2*_+1]}}d+=9,m+=6}t.i3=d,t.i2=m}parseNormals(t){const e=t.MappingInformationType,r=t.ReferenceInformationType,n=t.Normals.a;let s=[];return"IndexToDirect"===r&&("NormalIndex"in t?s=t.NormalIndex.a:"NormalsIndex"in t&&(s=t.NormalsIndex.a)),{dataSize:3,buffer:n,indices:s,mappingType:e,referenceType:r}}parseUVs(t){const e=t.MappingInformationType,r=t.ReferenceInformationType,n=t.UV.a;let s=[];return"IndexToDirect"===r&&(s=t.UVIndex.a),{dataSize:2,buffer:n,indices:s,mappingType:e,referenceType:r}}parseVertexColors(t){const e=t.MappingInformationType,r=t.ReferenceInformationType,n=t.Colors.a;let s=[];return"IndexToDirect"===r&&(s=t.ColorIndex.a),{dataSize:4,buffer:n,indices:s,mappingType:e,referenceType:r}}parseMaterialIndices(t){const e=t.MappingInformationType,r=t.ReferenceInformationType;if("NoMappingInformation"===e)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const n=t.Materials.a,s=[];for(let i=0;i<n.length;++i)s.push(i);return{dataSize:1,buffer:n,indices:s,mappingType:e,referenceType:r}}parseNurbsGeometry(t){return null}}e.GeometryBufferParser=o},"18c7":function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(r("6e01")),i=n(r("8e17")),a=r("cc7a"),o=n(r("abdb"));class l{constructor(t=null,e=0){this.m_uid=-1,this._mvx=new i.default,this._mvy=new i.default,this._mvz=new i.default,this.m_index=0,this.m_fs32=null,this.m_localFS32=null,this.m_index=e,null!=t?(this.m_uid=l.s_uid++,this.m_fs32=t,this.m_localFS32=this.m_fs32.subarray(e,e+16)):(this.m_uid=l.s_isolatedUid++,this.m_fs32=new Float32Array(16),this.m_fs32.set(l.s_InitData,0),this.m_localFS32=this.m_fs32)}setData(t){16==t.length&&this.m_localFS32.set(t)}getCapacity(){return 16}GetMaxUid(){return l.s_uid}getUid(){return this.m_uid}getLocalFS32(){return this.m_localFS32}getFS32(){return this.m_fs32}getFSIndex(){return this.m_index}identity(){this.m_localFS32.set(l.s_InitData,0)}determinant(){let t=this.m_localFS32;return(t[0]*t[5]-t[4]*t[1])*(t[10]*t[15]-t[14]*t[11])-(t[0]*t[9]-t[8]*t[1])*(t[6]*t[15]-t[14]*t[7])+(t[0]*t[13]-t[12]*t[1])*(t[6]*t[11]-t[10]*t[7])+(t[4]*t[9]-t[8]*t[5])*(t[2]*t[15]-t[14]*t[3])-(t[4]*t[13]-t[12]*t[5])*(t[2]*t[11]-t[10]*t[3])+(t[8]*t[13]-t[12]*t[9])*(t[2]*t[7]-t[6]*t[3])}multiplyMatrices(t,e){const r=t.getLocalFS32(),n=e.getLocalFS32(),s=this.getLocalFS32(),i=r[0],a=r[4],o=r[8],l=r[12],h=r[1],u=r[5],c=r[9],f=r[13],p=r[2],d=r[6],m=r[10],y=r[14],g=r[3],_=r[7],x=r[11],v=r[15],w=n[0],b=n[4],M=n[8],z=n[12],F=n[1],S=n[5],T=n[9],P=n[13],A=n[2],I=n[6],B=n[10],O=n[14],L=n[3],E=n[7],k=n[11],R=n[15];return s[0]=i*w+a*F+o*A+l*L,s[4]=i*b+a*S+o*I+l*E,s[8]=i*M+a*T+o*B+l*k,s[12]=i*z+a*P+o*O+l*R,s[1]=h*w+u*F+c*A+f*L,s[5]=h*b+u*S+c*I+f*E,s[9]=h*M+u*T+c*B+f*k,s[13]=h*z+u*P+c*O+f*R,s[2]=p*w+d*F+m*A+y*L,s[6]=p*b+d*S+m*I+y*E,s[10]=p*M+d*T+m*B+y*k,s[14]=p*z+d*P+m*O+y*R,s[3]=g*w+_*F+x*A+v*L,s[7]=g*b+_*S+x*I+v*E,s[11]=g*M+_*T+x*B+v*k,s[15]=g*z+_*P+x*O+v*R,this}multiply(t,e=null){return null!=t&&null!=e?this.multiplyMatrices(t,e):null!=t?this.multiplyMatrices(this,t):this}premultiply(t){return t!=this&&null!=t?this.multiplyMatrices(t,this):this}append(t){let e=t.getLocalFS32(),r=this.m_localFS32,n=r[0],s=r[4],i=r[8],a=r[12],o=r[1],l=r[5],h=r[9],u=r[13],c=r[2],f=r[6],p=r[10],d=r[14],m=r[3],y=r[7],g=r[11],_=r[15],x=e[0],v=e[4],w=e[8],b=e[12],M=e[1],z=e[5],F=e[9],S=e[13],T=e[2],P=e[6],A=e[10],I=e[14],B=e[3],O=e[7],L=e[11],E=e[15];r[0]=n*x+o*v+c*w+m*b,r[1]=n*M+o*z+c*F+m*S,r[2]=n*T+o*P+c*A+m*I,r[3]=n*B+o*O+c*L+m*E,r[4]=s*x+l*v+f*w+y*b,r[5]=s*M+l*z+f*F+y*S,r[6]=s*T+l*P+f*A+y*I,r[7]=s*B+l*O+f*L+y*E,r[8]=i*x+h*v+p*w+g*b,r[9]=i*M+h*z+p*F+g*S,r[10]=i*T+h*P+p*A+g*I,r[11]=i*B+h*O+p*L+g*E,r[12]=a*x+u*v+d*w+_*b,r[13]=a*M+u*z+d*F+_*S,r[14]=a*T+u*P+d*A+_*I,r[15]=a*B+u*O+d*L+_*E}append3x3(t){let e=t.getLocalFS32(),r=this.m_localFS32,n=r[0],s=r[4],i=r[8],a=r[1],o=r[5],l=r[9],h=r[2],u=r[6],c=r[10],f=e[0],p=e[4],d=e[8],m=e[1],y=e[5],g=e[9],_=e[2],x=e[6],v=e[10];r[0]=n*f+a*p+h*d,r[1]=n*m+a*y+h*g,r[2]=n*_+a*x+h*v,r[4]=s*f+o*p+u*d,r[5]=s*m+o*y+u*g,r[6]=s*_+o*x+u*v,r[8]=i*f+l*p+c*d,r[9]=i*m+l*y+c*g,r[10]=i*_+l*x+c*v}appendRotationPivot(t,e,r=null){null==r&&(r=i.default.Z_AXIS),l.s_tMat4.identity(),l.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),l.s_tMat4.appendTranslationXYZ(r.x,r.y,r.z),this.append(l.s_tMat4)}appendRotation(t,e){l.s_tMat4.identity(),l.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),this.append(l.s_tMat4)}appendRotationX(t){l.s_tMat4.rotationX(t),this.append3x3(l.s_tMat4)}appendRotationY(t){l.s_tMat4.rotationY(t),this.append3x3(l.s_tMat4)}appendRotationZ(t){l.s_tMat4.rotationZ(t),this.append3x3(l.s_tMat4)}appendRotationEulerAngle(t,e,r){l.s_tMat4.rotationY(e),this.append3x3(l.s_tMat4),l.s_tMat4.rotationX(t),this.append3x3(l.s_tMat4),l.s_tMat4.rotationZ(r),this.append3x3(l.s_tMat4)}setScale(t){let e=this.m_localFS32;return e[0]=t.x,e[5]=t.y,e[10]=t.z,this}setScaleXYZ(t,e,r){let n=this.m_localFS32;n[0]=t,n[5]=e,n[10]=r}getScale(t){let e=this.m_localFS32;t.x=e[0],t.y=e[5],t.z=e[10]}setRotationEulerAngle(t,e,r){let n=this.m_localFS32,s=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e),l=Math.cos(r),h=Math.sin(r),u=l*o,c=h*o,f=a*n[0],p=i*n[5],d=s*n[5],m=s*n[10],y=i*n[10];n[1]=h*f,n[2]=-o*n[0],n[0]=l*f,n[4]=u*p-h*d,n[8]=u*m+h*y,n[5]=c*p+l*d,n[9]=c*m-l*y,n[6]=a*p,n[10]=a*m}setRotationEulerAngle2(t,e,r,n,s,i){let a=this.m_localFS32,o=s*n,l=i*n,h=r*a[0],u=e*a[5],c=t*a[5],f=t*a[10],p=e*a[10];a[1]=i*h,a[2]=-n*a[0],a[0]=s*h,a[4]=o*u-i*c,a[8]=o*f+i*p,a[5]=l*u+s*c,a[9]=l*f-s*p,a[6]=r*u,a[10]=r*f}compose(t,e,r){const n=this.m_localFS32,s=e.x,i=e.y,a=e.z,o=e.w,l=s+s,h=i+i,u=a+a,c=s*l,f=s*h,p=s*u,d=i*h,m=i*u,y=a*u,g=o*l,_=o*h,x=o*u,v=r.x,w=r.y,b=r.z;return n[0]=(1-(d+y))*v,n[1]=(f+x)*v,n[2]=(p-_)*v,n[3]=0,n[4]=(f-x)*w,n[5]=(1-(c+y))*w,n[6]=(m+g)*w,n[7]=0,n[8]=(p+_)*b,n[9]=(m-g)*b,n[10]=(1-(c+d))*b,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(i.default.ZERO,t,i.default.ONE)}makeRotationFromEuler(t){const e=this.m_localFS32,r=t.x,n=t.y,s=t.z,i=Math.cos(r),o=Math.sin(r),l=Math.cos(n),h=Math.sin(n),u=Math.cos(s),c=Math.sin(s);if(t.order===a.EulerOrder.XYZ){const t=i*u,r=i*c,n=o*u,s=o*c;e[0]=l*u,e[4]=-l*c,e[8]=h,e[1]=r+n*h,e[5]=t-s*h,e[9]=-o*l,e[2]=s-t*h,e[6]=n+r*h,e[10]=i*l}else if(t.order===a.EulerOrder.YXZ){const t=l*u,r=l*c,n=h*u,s=h*c;e[0]=t+s*o,e[4]=n*o-r,e[8]=i*h,e[1]=i*c,e[5]=i*u,e[9]=-o,e[2]=r*o-n,e[6]=s+t*o,e[10]=i*l}else if(t.order===a.EulerOrder.ZXY){const t=l*u,r=l*c,n=h*u,s=h*c;e[0]=t-s*o,e[4]=-i*c,e[8]=n+r*o,e[1]=r+n*o,e[5]=i*u,e[9]=s-t*o,e[2]=-i*h,e[6]=o,e[10]=i*l}else if(t.order===a.EulerOrder.ZYX){const t=i*u,r=i*c,n=o*u,s=o*c;e[0]=l*u,e[4]=n*h-r,e[8]=t*h+s,e[1]=l*c,e[5]=s*h+t,e[9]=r*h-n,e[2]=-h,e[6]=o*l,e[10]=i*l}else if(t.order===a.EulerOrder.YZX){const t=i*l,r=i*h,n=o*l,s=o*h;e[0]=l*u,e[4]=s-t*c,e[8]=n*c+r,e[1]=c,e[5]=i*u,e[9]=-o*u,e[2]=-h*u,e[6]=r*c+n,e[10]=t-s*c}else if(t.order===a.EulerOrder.XZY){const t=i*l,r=i*h,n=o*l,s=o*h;e[0]=l*u,e[4]=-c,e[8]=h*u,e[1]=t*c+s,e[5]=i*u,e[9]=r*c-n,e[2]=n*c-r,e[6]=o*u,e[10]=s*c+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}extractRotation(t){const e=this.m_localFS32,r=t.getLocalFS32(),n=l.m_v3;t.copyColumnTo(0,n);const s=1/n.getLength();t.copyColumnTo(1,n);const i=1/n.getLength();t.copyColumnTo(2,n);const a=1/n.getLength();return e[0]=r[0]*s,e[1]=r[1]*s,e[2]=r[2]*s,e[3]=0,e[4]=r[4]*i,e[5]=r[5]*i,e[6]=r[6]*i,e[7]=0,e[8]=r[8]*a,e[9]=r[9]*a,e[10]=r[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}copyTranslation(t){const e=this.m_localFS32,r=t.getLocalFS32();return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}setTranslationXYZ(t,e,r){this.m_localFS32[12]=t,this.m_localFS32[13]=e,this.m_localFS32[14]=r}setTranslation(t){this.m_localFS32[12]=t.x,this.m_localFS32[13]=t.y,this.m_localFS32[14]=t.z}appendScaleXYZ(t,e,r){const n=this.m_localFS32;n[0]*=t,n[1]*=t,n[2]*=t,n[3]*=t,n[4]*=e,n[5]*=e,n[6]*=e,n[7]*=e,n[8]*=r,n[9]*=r,n[10]*=r,n[11]*=r}appendScaleXY(t,e){const r=this.m_localFS32;r[0]*=t,r[1]*=t,r[2]*=t,r[3]*=t,r[4]*=e,r[5]*=e,r[6]*=e,r[7]*=e}appendTranslationXYZ(t,e,r){this.m_localFS32[12]+=t,this.m_localFS32[13]+=e,this.m_localFS32[14]+=r}appendTranslation(t){this.m_localFS32[12]+=t.x,this.m_localFS32[13]+=t.y,this.m_localFS32[14]+=t.z}copyColumnFrom(t,e){const r=this.m_localFS32;switch(t){case 0:r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w;break;case 1:r[4]=e.x,r[5]=e.y,r[6]=e.z,r[7]=e.w;break;case 2:r[8]=e.x,r[9]=e.y,r[10]=e.z,r[11]=e.w;break;case 3:r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=e.w;break;default:break}}copyColumnTo(t,e){const r=this.m_localFS32;t<<=2,e.x=r[t],e.y=r[1+t],e.z=r[2+t],e.w=r[3+t]}setF32ArrAndIndex(t,e=0){null!=t&&e>=0&&(this.m_fs32=t,this.m_index=e,this.m_localFS32=this.m_fs32.subarray(e,e+16))}setF32ArrIndex(t=0){t>=0&&(this.m_index=t,this.m_localFS32=this.m_fs32.subarray(t,t+16))}setF32Arr(t){null!=t&&(this.m_fs32=t)}copyFromF32Arr(t,e=0){let r=0;for(let n=e+16;e<n;e++)this.m_localFS32[r]=t[e],++r}copyToF32Arr(t,e=0){t.set(this.m_localFS32,e)}copy(t){return this.m_localFS32.set(t.getLocalFS32(),0),this}copyFrom(t){this.m_localFS32.set(t.getLocalFS32(),0)}copyTo(t){t.getLocalFS32().set(this.getLocalFS32(),0)}copyRawDataFrom(t,e=16,r=0,n=!1){n&&this.transpose(),e-=r;let s=0;while(s<e)this.m_fs32[this.m_index+s]=t[s+r],++s;n&&this.transpose()}copyRawDataTo(t,e=16,r=0,n=!1){n&&this.transpose();let s=0;while(s<e)t[s+r]=this.m_fs32[this.m_index+s],++s;n&&this.transpose()}copyRowFrom(t,e){const r=this.m_localFS32;switch(t){case 0:r[0]=e.x,r[4]=e.y,r[8]=e.z,r[12]=e.w;break;case 1:r[1]=e.x,r[5]=e.y,r[9]=e.z,r[13]=e.w;break;case 2:r[2]=e.x,r[6]=e.y,r[10]=e.z,r[14]=e.w;break;case 3:r[3]=e.x,r[7]=e.y,r[11]=e.z,r[15]=e.w;break;default:break}}copyRowTo(t,e){const r=this.m_localFS32;e.x=r[t],e.y=r[4+t],e.z=r[8+t],e.w=r[12+t]}decompose(t){let e=[],r=l.s_tMat4,n=r.getLocalFS32();r.copyFrom(this);let a=new i.default(n[12],n[13],n[14]),h=new i.default;h.x=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),h.y=Math.sqrt(n[4]*n[4]+n[5]*n[5]+n[6]*n[6]),h.z=Math.sqrt(n[8]*n[8]+n[9]*n[9]+n[10]*n[10]),n[0]*(n[5]*n[10]-n[6]*n[9])-n[1]*(n[4]*n[10]-n[6]*n[8])+n[2]*(n[4]*n[9]-n[5]*n[8])<0&&(h.z=-h.z),n[0]/=h.x,n[1]/=h.x,n[2]/=h.x,n[4]/=h.y,n[5]/=h.y,n[6]/=h.y,n[8]/=h.z,n[9]/=h.z,n[10]/=h.z;let u=new i.default;switch(t){case o.default.AXIS_ANGLE:{u.w=s.default.SafeACos((n[0]+n[5]+n[10]-1)/2);let t=Math.sqrt((n[6]-n[9])*(n[6]-n[9])+(n[8]-n[2])*(n[8]-n[2])+(n[1]-n[4])*(n[1]-n[4]));t>s.default.MATH_MIN_POSITIVE?(u.x=(n[6]-n[9])/t,u.y=(n[8]-n[2])/t,u.z=(n[1]-n[4])/t):u.x=u.y=u.z=0}break;case o.default.QUATERNION:{let t=n[0]+n[5]+n[10];t>0?(u.w=Math.sqrt(1+t)/2,u.x=(n[6]-n[9])/(4*u.w),u.y=(n[8]-n[2])/(4*u.w),u.z=(n[1]-n[4])/(4*u.w)):n[0]>n[5]&&n[0]>n[10]?(u.x=Math.sqrt(1+n[0]-n[5]-n[10])/2,u.w=(n[6]-n[9])/(4*u.x),u.y=(n[1]+n[4])/(4*u.x),u.z=(n[8]+n[2])/(4*u.x)):n[5]>n[10]?(u.y=Math.sqrt(1+n[5]-n[0]-n[10])/2,u.x=(n[1]+n[4])/(4*u.y),u.w=(n[8]-n[2])/(4*u.y),u.z=(n[6]+n[9])/(4*u.y)):(u.z=Math.sqrt(1+n[10]-n[0]-n[5])/2,u.x=(n[8]+n[2])/(4*u.z),u.y=(n[6]+n[9])/(4*u.z),u.w=(n[1]-n[4])/(4*u.z))}break;case o.default.EULER_ANGLES:u.y=Math.asin(-n[2]),1!=n[2]&&-1!=n[2]?(u.x=Math.atan2(n[6],n[10]),u.z=Math.atan2(n[1],n[0])):(u.z=0,u.x=Math.atan2(n[4],n[5]));break;default:break}return e.push(a),e.push(u),e.push(h),r=null,e}invert(){let t=this.determinant(),e=Math.abs(t)>s.default.MATH_MIN_POSITIVE;if(e){let e=this.m_localFS32;t=1/t;let r=e[0],n=e[4],s=e[8],i=e[12],a=e[1],o=e[5],l=e[9],h=e[13],u=e[2],c=e[6],f=e[10],p=e[14],d=e[3],m=e[7],y=e[11],g=e[15];e[0]=t*(o*(f*g-p*y)-l*(c*g-p*m)+h*(c*y-f*m)),e[1]=-t*(a*(f*g-p*y)-l*(u*g-p*d)+h*(u*y-f*d)),e[2]=t*(a*(c*g-p*m)-o*(u*g-p*d)+h*(u*m-c*d)),e[3]=-t*(a*(c*y-f*m)-o*(u*y-f*d)+l*(u*m-c*d)),e[4]=-t*(n*(f*g-p*y)-s*(c*g-p*m)+i*(c*y-f*m)),e[5]=t*(r*(f*g-p*y)-s*(u*g-p*d)+i*(u*y-f*d)),e[6]=-t*(r*(c*g-p*m)-n*(u*g-p*d)+i*(u*m-c*d)),e[7]=t*(r*(c*y-f*m)-n*(u*y-f*d)+s*(u*m-c*d)),e[8]=t*(n*(l*g-h*y)-s*(o*g-h*m)+i*(o*y-l*m)),e[9]=-t*(r*(l*g-h*y)-s*(a*g-h*d)+i*(a*y-l*d)),e[10]=t*(r*(o*g-h*m)-n*(a*g-h*d)+i*(a*m-o*d)),e[11]=-t*(r*(o*y-l*m)-n*(a*y-l*d)+s*(a*m-o*d)),e[12]=-t*(n*(l*p-h*f)-s*(o*p-h*c)+i*(o*f-l*c)),e[13]=t*(r*(l*p-h*f)-s*(a*p-h*u)+i*(a*f-l*u)),e[14]=-t*(r*(o*p-h*c)-n*(a*p-h*u)+i*(a*c-o*u)),e[15]=t*(r*(o*f-l*c)-n*(a*f-l*u)+s*(a*c-o*u))}return e}invertThis(){return this.invert(),this}pointAt(t,e,r){null==e&&(e=new i.default(0,0,-1)),null==r&&(r=new i.default(0,-1,0));let n=e.subtract(t),a=r.clone();n.normalize(),a.normalize();let o=n.clone().scaleBy(a.dot(n));a.subtractBy(o),a.getLength()>s.default.MATH_MIN_POSITIVE?a.normalize():0!=n.x?a.setTo(-n.y,n.x,0):a.setTo(1,0,0);let l=a.crossProduct(n);l.normalize();let h=this.m_localFS32;h[0]=l.x,h[4]=l.y,h[8]=l.z,h[12]=0,h[1]=a.x,h[5]=a.y,h[9]=a.z,h[13]=0,h[2]=n.x,h[6]=n.y,h[10]=n.z,h[14]=0,h[3]=t.x,h[7]=t.y,h[11]=t.z,h[15]=1}prepend(t){let e=t.getLocalFS32(),r=this.m_localFS32,n=e[0],s=e[4],i=e[8],a=e[12],o=e[1],l=e[5],h=e[9],u=e[13],c=e[2],f=e[6],p=e[10],d=e[14],m=e[3],y=e[7],g=e[11],_=e[15],x=r[0],v=r[4],w=r[8],b=r[12],M=r[1],z=r[5],F=r[9],S=r[13],T=r[2],P=r[6],A=r[10],I=r[14],B=r[3],O=r[7],L=r[11],E=r[15];r[0]=n*x+o*v+c*w+m*b,r[1]=n*M+o*z+c*F+m*S,r[2]=n*T+o*P+c*A+m*I,r[3]=n*B+o*O+c*L+m*E,r[4]=s*x+l*v+f*w+y*b,r[5]=s*M+l*z+f*F+y*S,r[6]=s*T+l*P+f*A+y*I,r[7]=s*B+l*O+f*L+y*E,r[8]=i*x+h*v+p*w+g*b,r[9]=i*M+h*z+p*F+g*S,r[10]=i*T+h*P+p*A+g*I,r[11]=i*B+h*O+p*L+g*E,r[12]=a*x+u*v+d*w+_*b,r[13]=a*M+u*z+d*F+_*S,r[14]=a*T+u*P+d*A+_*I,r[15]=a*B+u*O+d*L+_*E}prepend3x3(t){let e=t.getLocalFS32(),r=this.m_localFS32,n=e[0],s=e[4],i=e[8],a=e[1],o=e[5],l=e[9],h=e[2],u=e[6],c=e[10],f=r[0],p=r[4],d=r[8],m=r[1],y=r[5],g=r[9],_=r[2],x=r[6],v=r[10];r[0]=n*f+a*p+h*d,r[1]=n*m+a*y+h*g,r[2]=n*_+a*x+h*v,r[4]=s*f+o*p+u*d,r[5]=s*m+o*y+u*g,r[6]=s*_+o*x+u*v,r[8]=i*f+l*p+c*d,r[9]=i*m+l*y+c*g,r[10]=i*_+l*x+c*v}prependRotationPivot(t,e,r){l.s_tMat4.identity(),l.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),l.s_tMat4.appendTranslationXYZ(r.x,r.y,r.z),this.prepend(l.s_tMat4)}prependRotation(t,e){l.s_tMat4.identity(),l.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),this.prepend(l.s_tMat4)}prependRotationX(t){l.s_tMat4.rotationX(t),this.prepend3x3(l.s_tMat4)}prependRotationY(t){l.s_tMat4.rotationY(t),this.prepend3x3(l.s_tMat4)}prependRotationZ(t){l.s_tMat4.rotationZ(t),this.prepend3x3(l.s_tMat4)}prependRotationEulerAngle(t,e,r){l.s_tMat4.rotationY(e),this.prepend3x3(l.s_tMat4),l.s_tMat4.rotationX(t),this.prepend3x3(l.s_tMat4),l.s_tMat4.rotationZ(r),this.prepend3x3(l.s_tMat4)}prependScale(t,e,r){const n=this.m_localFS32;n[0]*=t,n[1]*=e,n[2]*=r,n[4]*=t,n[5]*=e,n[6]*=r,n[8]*=t,n[9]*=e,n[10]*=r,n[12]*=t,n[13]*=e,n[14]*=r}prependScaleXY(t,e){const r=this.m_localFS32;r[0]*=t,r[1]*=e,r[4]*=t,r[5]*=e,r[8]*=t,r[9]*=e,r[12]*=t,r[13]*=e}prependTranslationXYZ(t,e,r){l.s_tMat4.identity(),this.prepend(l.s_tMat4)}prependTranslation(t){l.s_tMat4.identity(),this.prepend(l.s_tMat4)}recompose(t,e){if(t.length<3||0==t[2].x||0==t[2].y||0==t[2].z)return!1;this.identity();let r=l.s_tMat4.getFS32();r[0]=r[1]=r[2]=t[2].x,r[4]=r[5]=r[6]=t[2].y,r[8]=r[9]=r[10]=t[2].z;let n=this.m_localFS32;switch(e){case o.default.EULER_ANGLES:{let e=Math.cos(t[1].x),s=Math.cos(t[1].y),i=Math.cos(t[1].z),a=Math.sin(t[1].x),o=Math.sin(t[1].y),l=Math.sin(t[1].z);n[0]=s*i*r[0],n[1]=s*l*r[1],n[2]=-o*r[2],n[3]=0,n[4]=(a*o*i-e*l)*r[4],n[5]=(a*o*l+e*i)*r[5],n[6]=a*s*r[6],n[7]=0,n[8]=(e*o*i+a*l)*r[8],n[9]=(e*o*l-a*i)*r[9],n[10]=e*s*r[10],n[11]=0,n[12]=t[0].x,n[13]=t[0].y,n[14]=t[0].z,n[15]=1}break;default:{let s=t[1].x,i=t[1].y,a=t[1].z,l=t[1].w;if(e==o.default.AXIS_ANGLE){let t=.5*l;s*=Math.sin(t),i*=Math.sin(t),a*=Math.sin(t),l=Math.cos(t)}n[0]=(1-2*i*i-2*a*a)*r[0],n[1]=(2*s*i+2*l*a)*r[1],n[2]=(2*s*a-2*l*i)*r[2],n[3]=0,n[4]=(2*s*i-2*l*a)*r[4],n[5]=(1-2*s*s-2*a*a)*r[5],n[6]=(2*i*a+2*l*s)*r[6],n[7]=0,n[8]=(2*s*a+2*l*i)*r[8],n[9]=(2*i*a-2*l*s)*r[9],n[10]=(1-2*s*s-2*i*i)*r[10],n[11]=0,n[12]=t[0].x,n[13]=t[0].y,n[14]=t[0].z,n[15]=1}break}return 0==t[2].x&&(this.m_localFS32[0]=0),0==t[2].y&&(this.m_localFS32[5]=0),0==t[2].z&&(this.m_localFS32[10]=0),r=null,!0}setThreeAxes(t,e,r){let n=this.m_localFS32;n[0]=t.x,n[1]=t.y,n[2]=t.z,n[4]=e.x,n[5]=e.y,n[6]=e.z,n[8]=r.x,n[9]=r.y,n[10]=r.z}deltaTransformVector(t){let e=t.x,r=t.y,n=t.z;return new i.default(e*this.m_localFS32[0]+r*this.m_localFS32[4]+n*this.m_localFS32[8],e*this.m_localFS32[1]+r*this.m_localFS32[5]+n*this.m_localFS32[9],e*this.m_localFS32[2]+r*this.m_localFS32[6]+n*this.m_localFS32[10],0)}deltaTransformVectorSelf(t){let e=this.m_localFS32,r=t.x,n=t.y,s=t.z;t.x=r*e[0]+n*e[4]+s*e[8],t.y=r*e[1]+n*e[5]+s*e[9],t.z=r*e[2]+n*e[6]+s*e[10]}deltaTransformOutVector(t,e){let r=this.m_localFS32;e.x=t.x*r[0]+t.y*r[4]+t.z*r[8],e.y=t.x*r[1]+t.y*r[5]+t.z*r[9],e.z=t.x*r[2]+t.y*r[6]+t.z*r[10]}transformVector(t){let e=this.m_localFS32,r=t.x,n=t.y,s=t.z;return new i.default(r*e[0]+n*e[4]+s*e[8]+e[12],r*e[1]+n*e[5]+s*e[9]+e[13],r*e[2]+n*e[6]+s*e[10]+e[14],r*e[3]+n*e[7]+s*e[11]+e[15])}transformOutVector(t,e){let r=t.x,n=t.y,s=t.z,i=this.m_localFS32;e.setTo(r*i[0]+n*i[4]+s*i[8]+i[12],r*i[1]+n*i[5]+s*i[9]+i[13],r*i[2]+n*i[6]+s*i[10]+i[14],r*i[3]+n*i[7]+s*i[11]+i[15])}transformOutVector3(t,e){let r=this.m_localFS32;e.x=t.x*r[0]+t.y*r[4]+t.z*r[8]+r[12],e.y=t.x*r[1]+t.y*r[5]+t.z*r[9]+r[13],e.z=t.x*r[2]+t.y*r[6]+t.z*r[10]+r[14]}transformVector3Self(t){let e=t.x,r=t.y,n=t.z,s=this.m_localFS32;t.x=e*s[0]+r*s[4]+n*s[8]+s[12],t.y=e*s[1]+r*s[5]+n*s[9]+s[13],t.z=e*s[2]+r*s[6]+n*s[10]+s[14]}transformVectorSelf(t){let e=t.x,r=t.y,n=t.z,s=this.m_localFS32;t.setTo(e*s[0]+r*s[4]+n*s[8]+s[12],e*s[1]+r*s[5]+n*s[9]+s[13],e*s[2]+r*s[6]+n*s[10]+s[14],e*s[3]+r*s[7]+n*s[11]+s[15])}transformVectors(t,e,r){let n,s,i,a=0,o=this.m_localFS32;e-=3;while(a<=e)n=t[a],s=t[a+1],i=t[a+2],r[a]=n*o[0]+s*o[4]+i*o[8]+o[12],r[a+1]=n*o[1]+s*o[5]+i*o[9]+o[13],r[a+2]=n*o[2]+s*o[6]+i*o[10]+o[14],a+=3}transformVectorsSelf(t,e){let r,n,s,i=0,a=this.m_localFS32;e-=3;while(i<=e)r=t[i],n=t[i+1],s=t[i+2],t[i]=r*a[0]+n*a[4]+s*a[8]+a[12],t[i+1]=r*a[1]+n*a[5]+s*a[9]+a[13],t[i+2]=r*a[2]+n*a[6]+s*a[10]+a[14],i+=3}transformVectorsRangeSelf(t,e,r){let n,s,i,a=e,o=this.m_localFS32;r-=3;while(a<=r)n=t[a],s=t[a+1],i=t[a+2],t[a]=n*o[0]+s*o[4]+i*o[8]+o[12],t[a+1]=n*o[1]+s*o[5]+i*o[9]+o[13],t[a+2]=n*o[2]+s*o[6]+i*o[10]+o[14],a+=3}transpose(){l.s_tMat4.copyFrom(this);let t=l.s_tMat4.getFS32(),e=this.m_localFS32;e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11]}interpolateTo(t,e){let r=t.getFS32(),n=t.getFSIndex(),s=0,i=this.m_index;while(s<16)this.m_fs32[i]+=(r[n+s]-this.m_fs32[i])*e,++i,++s}getAxisRotation(t,e,r,n){n=-n;let s=this.m_localFS32,i=Math.sin(n),a=Math.cos(n),o=1-a;s[0]=a+t*t*o,s[5]=a+e*e*o,s[10]=a+r*r*o;let l=t*e*o,h=r*i;s[4]=l+h,s[1]=l-h,l=t*r*o,h=e*i,s[8]=l-h,s[2]=l+h,l=e*r*o,h=t*i,s[9]=l+h,s[6]=l-h}rotationX(t){let e=Math.sin(t),r=Math.cos(t);this.m_localFS32[0]=1,this.m_localFS32[1]=0,this.m_localFS32[2]=0,this.m_localFS32[4]=0,this.m_localFS32[5]=r,this.m_localFS32[6]=e,this.m_localFS32[8]=0,this.m_localFS32[9]=-e,this.m_localFS32[10]=r}rotationY(t){let e=Math.sin(t),r=Math.cos(t);this.m_localFS32[0]=r,this.m_localFS32[1]=0,this.m_localFS32[2]=-e,this.m_localFS32[4]=0,this.m_localFS32[5]=1,this.m_localFS32[6]=0,this.m_localFS32[8]=e,this.m_localFS32[9]=0,this.m_localFS32[10]=r}rotationZ(t){let e=Math.sin(t),r=Math.cos(t);this.m_localFS32[0]=r,this.m_localFS32[1]=e,this.m_localFS32[2]=0,this.m_localFS32[4]=-e,this.m_localFS32[5]=r,this.m_localFS32[6]=0,this.m_localFS32[8]=0,this.m_localFS32[9]=0,this.m_localFS32[10]=1}toString(){let t="\n"+this.m_localFS32[0]+","+this.m_localFS32[1]+","+this.m_localFS32[2]+","+this.m_localFS32[3]+"\n";return t+=this.m_localFS32[4]+","+this.m_localFS32[5]+","+this.m_localFS32[6]+","+this.m_localFS32[7]+"\n",t+=this.m_localFS32[8]+","+this.m_localFS32[9]+","+this.m_localFS32[10]+","+this.m_localFS32[11]+"\n",t+=this.m_localFS32[12]+","+this.m_localFS32[13]+","+this.m_localFS32[14]+","+this.m_localFS32[15]+"\n",t}transformPerspV4Self(t){const e=this.m_localFS32;t.w=t.z,t.x*=e[0],t.y*=e[5],t.z*=e[10],t.z+=e[14],t.w*=e[11],t.w+=e[15]}clone(){let t=new l;return t.copyFrom(this),t}perspectiveRH(t,e,r,n){const s=this.m_localFS32;let i=Math.tan(.5*t);this.identity(),s[0]=1/(e*i),s[5]=1/i,s[10]=-(n+r)/(n-r),s[11]=-1,s[14]=-2*n*r/(n-r)}perspectiveRH2(t,e,r,n,s){let i=e/Math.tan(.5*t),a=i/e,o=i/r,l=-s/(s-n),h=-n*l;this.identity();const u=this.m_localFS32;u[0]=a,u[5]=o,u[10]=l,u[11]=-1,u[14]=h}orthoRH(t,e,r,n,s,i){this.identity();const a=this.m_localFS32;a[0]=2/(n-r),a[5]=2/(e-t),a[10]=-2/(i-s),a[12]=-(n+r)/(n-r),a[13]=-(e+t)/(e-t),a[14]=-(i+s)/(i-s),a[15]=1}perspectiveLH(t,e,r,n){let s=Math.tan(.5*t);this.identity();const i=this.m_localFS32;i[0]=1/(e*s),i[5]=1/s,i[10]=(n+r)/(n-r),i[11]=1,i[14]=2*n*r/(n-r)}orthoLH(t,e,r,n,s,i){this.identity();const a=this.m_localFS32;a[0]=2/(n-r),a[5]=2/(e-t),a[10]=2/(i-s),a[12]=-(n+r)/(n-r),a[13]=-(e+t)/(e-t),a[14]=-(i+s)/(i-s),a[15]=1}lookAtRH(t,e,r){this.identity();let n=e.subtract(t);n.normalize();let s=n.crossProduct(r);s.normalize();let i=s.crossProduct(n);s.w=-s.dot(t),i.w=-i.dot(t),n.w=n.dot(t),n.negate(),this.copyRowFrom(0,s),this.copyRowFrom(1,i),this.copyRowFrom(2,n)}lookAtLH(t,e,r){this.identity();let n=e.subtract(t);n.normalize();let s=n.crossProduct(r);s.normalize();let i=s.crossProduct(n);s.w=-s.dot(t),i.w=-i.dot(t),n.w=-n.dot(t),this.copyRowFrom(0,s),this.copyRowFrom(1,i),this.copyRowFrom(2,n)}destroy(){this.m_localFS32=null,this.m_fs32=null,this.m_index=-1}}l.s_InitData=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),l.m_v3=new i.default,l.s_uid=0,l.s_isolatedUid=327679,l.s_tMat4=new l,e.default=l},"1eb2":function(t,e,r){"use strict";if("undefined"!==typeof window){var n=window.document.currentScript,s=r("8875");n=s(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:s});var i=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(r.p=i[1])}},"3a68":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t=!0){if(this.m_sysEnabled=!1,this.m_sysEnabled="undefined"!==typeof ThreadCore,t){if(!this.m_sysEnabled)throw Error("Can not find ThreadCore module !!!");ThreadCore.initializeExternModule(this)}}receiveData(t){}postMessageToThread(t,e=null){this.m_sysEnabled&&(null!=e?ThreadCore.postMessageToThread(t):ThreadCore.postMessageToThread(t,e))}getTaskClass(){throw Error("the taskClass value is illegal !!!")}dependencyFinish(){}getUniqueName(){throw Error("the uniqueName value is illegal !!!")}}e.BaseTaskInThread=n},"5ab6":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("8310");class s{constructor(){}calcVtxIVS(t){let e=t,r=0,n=t.length,s=0;for(let o=0;o<n;++o)if(r++,e[o]<0){if(4==r)s+=6;else if(3==r)s+=3;else for(let t=r-2;t>0;t--)s+=3;r=0}let i=s>65535?new Uint32Array(s):new Uint16Array(s),a=0;for(let o=0;o<n;++o)if(r++,e[o]<0){if(4==r)i[a]=o-3,i[a+1]=o-2,i[a+2]=o-1,i[a+3]=o,i[a+4]=o-3,i[a+5]=o-1,a+=6;else if(3==r)i[a]=o-2,i[a+1]=o-1,i[a+2]=o,a+=3;else for(let t=r-2;t>0;t--)i[a]=o,i[a+1]=o-t-1,i[a+2]=o-t,a+=3;r=0}return i}buildVS(t,e,r){let n=3*t.length,s=new Float32Array(n),i=0,a=0;for(let o=0;o<r;++o)a=3*o,i=t[o],i<0&&(i=-1*i-1),i*=3,s[a]=e[i],s[a+1]=e[i+1],s[a+2]=e[i+2],a+=3;return s}buildNVS(t,e,r){let n=null,s=3*t.length;if(null==e||e.length==s)null!=e&&(n=new Float32Array(e));else{let i=0,a=0;n=new Float32Array(s);for(let s=0;s<r;++s)a=3*s,i=t[s],i<0&&(i=-1*i-1),i*=3,n[a]=e[i],n[a+1]=e[i+1],n[a+2]=e[i+2],a+=3}return n}buildUVS(t,e){let r=null,n=2*t.length;if(null==e||e.length==n)null!=e&&(r=new Float32Array(e));else{let s=0,i=0;r=new Float32Array(n);for(let a=0;a<n;++a)i=2*a,s=t[a],s<0&&(s=-1*s-1),s*=2,r[i]=e[s],r[i+1]=e[s+1],i+=2}return r}buildBufs(t,e,r,n,s,i){e.length;let a=e.length,o=this.calcVtxIVS(e);t.vertex=this.buildVS(e,r,a),t.normal=this.buildNVS(e,n,a),t.uvs=s?[this.buildUVS(i,s)]:null,t.indices=o}createBufObject(t){let e=new n.FBXBufferObject,r=null,s=t.uv;s&&s.length>0&&(r=s[0]);let i=null,a=null;return null!=r&&(i=r.buffer,a=r.indices),null!=t.normal?this.buildBufs(e,t.vertexIndices,t.vertexPositions,t.normal.buffer,i,a):this.buildBufs(e,t.vertexIndices,t.vertexPositions,null,i,a),null==e.uvs&&(e.uvs=[new Float32Array(2*e.indices.length/3)],e.errorStatus=1),e.isEntity=!0,e}}e.ElementGeomData=s},"5b39":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.crossOrigin="anonymous"}setCrossOrigin(t){this.crossOrigin=t}async load(t,e,r=null,n=null,s="blob",i=""){if(null==e)throw Error("onload == null !!!");const a=new FileReader;a.onload=r=>{e&&e(a.result,t)};const o=new XMLHttpRequest;o.open("GET",t,!0),""!=i&&o.setRequestHeader("Range",i),o.responseType=s,o.onload=r=>{if(o.status<=206)switch(s){case"arraybuffer":case"blob":a.readAsArrayBuffer(o.response);break;case"json":e&&e(o.response,t);break;case"text":e&&e(o.response,t);break;default:e&&e(o.response,t);break}else n&&n(o.status,t)},null!=r&&(o.onprogress=e=>{let n=0;if(e.total>0||e.lengthComputable)n=Math.min(1,e.loaded/e.total);else{let t=parseInt(o.getResponseHeader("content-length"));t>0&&(t*=4,n=Math.min(1,e.loaded/t))}r(n,t)}),null!=n&&(o.onerror=e=>{n(o.status,t)}),o.send(null)}}e.HttpFileLoader=n},"6e01":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{static Clamp(t,e,r){return Math.max(Math.min(t,r),e)}static IsPowerOf2(t){return 0==(t&t-1)}static CalcCeilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}static CalcNearestCeilPow2(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}static CalcFloorCeilPow2(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}static DegreeToRadian(t){return n.MATH_PI_OVER_180*t}static Log2(t){return Math.log(t)/Math.LN2}static GetMaxMipMapLevel(t,e){return Math.round(n.Log2(Math.max(t,e))+1)}static SafeACos(t){return t<=-1?n.MATH_PI:t>=1?0:Math.acos(t)}static GetNearestCeilPow2(t){let e=1;while(e<t)e<<=1;return e}static GetMinRadian(t,e){return e%=n.MATH_2PI,t%=n.MATH_2PI,e<t?(e=n.MATH_2PI-t+e,e>n.MATH_PI?e-n.MATH_2PI:e):e>t?(t=n.MATH_2PI-e+t,t>n.MATH_PI?n.MATH_2PI-t:-t):0}static GetMinDegree(t,e){let r=0;return e>=270&&t<90?r=(e-(t+360))%180:e<=90&&t>=270?r=(e+360-t)%180:(r=e-t,r>180?(r-=360,r%=360):r<-180&&(r+=360,r%=360)),r}static GetDegreeByXY(t,e){if(Math.abs(t)<1e-5)return e>=0?270:90;let r=180*Math.atan(e/t)/Math.PI;return t>=0?r:180+r}static GetRadianByXY(t,e){if(Math.abs(t)<n.MATH_MIN_POSITIVE)return e>=0?n.MATH_1PER2PI:n.MATH_3PER2PI;let r=Math.atan(e/t);return t>=0?r:n.MATH_PI+r}static GetRadianByCos(t,e,r){var s=Math.acos(t);return e>=0?s:n.MATH_PI+s}}n.MATH_MIN_POSITIVE=1e-5,n.MATH_MAX_NEGATIVE=-1e-5,n.MATH_MAX_POSITIVE=268435454,n.MATH_MIN_NEGATIVE=-268435454,n.MATH_1_OVER_255=1/255,n.MATH_PI=Math.PI,n.MATH_2PI=2*n.MATH_PI,n.MATH_3PER2PI=1.5*n.MATH_PI,n.MATH_1PER2PI=.5*n.MATH_PI,n.MATH_1_OVER_PI=1/n.MATH_PI,n.MATH_1_OVER_360=1/360,n.MATH_1_OVER_180=1/180,n.MATH_180_OVER_PI=180/n.MATH_PI,n.MATH_PI_OVER_180=n.MATH_PI/180,n.MATH_LN2=.6931471805599453,e.default=n},8310:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.id=-1,this.ID="",this.userData={},this.parent=null,this.i3=0,this.i2=0,this.uvs=[],this.normal=null,this.vertex=null,this.indices=null,this.colors=null,this.materialIndex=[],this.vertexWeights=[],this.weightsIndices=[],this.isEntity=!1,this.transform=null,this.errorStatus=0}toGeometryModel(){let t=this.indices;if(null==t){let e=this.vertex.length,r=e/3;t=r>65535?new Uint32Array(r):new Uint16Array(r);for(let n=0;n<r;++n)t[n]=n}let e={uvsList:this.uvs,vertices:this.vertex,normals:this.normal,indices:t};return e}destroy(){this.uvs=null,this.vertex=null,this.normal=null,this.colors=null,this.indices=null}}e.FBXBufferObject=n},8875:function(t,e,r){var n,s,i;(function(r,a){s=[],n=a,i="function"===typeof n?n.apply(e,s):n,void 0===i||(t.exports=i)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(p){var r,n,s,i=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,o=i.exec(p.stack)||a.exec(p.stack),l=o&&o[1]||!1,h=o&&o[2]||!1,u=document.location.href.replace(document.location.hash,""),c=document.getElementsByTagName("script");l===u&&(r=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(h-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),s=r.replace(n,"$1").trim());for(var f=0;f<c.length;f++){if("interactive"===c[f].readyState)return c[f];if(c[f].src===l)return c[f];if(l===u&&c[f].innerHTML&&c[f].innerHTML.trim()===s)return c[f]}return null}}return t}))},"8b17":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("f689"),s=r("1280");class i{constructor(){}parse(t,e){this.m_connections=this.parseConnections(t.map);const r=this.parseDeformers(t.map,this.m_connections);let n=new s.GeometryBufferParser;n.setReader(e);const i=n.parseGeomBuf(r,t.map,this.m_connections);return this.parseScene(r,i,this.m_connections,t.map),i}parseScene(t,e,r,n){this.parseModels(e,r,n)}parseModels(t,e,r){const n=new Map,s=r.Objects.Model;for(const i in s){const t=parseInt(i),r=s[i];e.get(t);let a=null;switch(r.attrType){case"Camera":break;case"Light":break;case"Mesh":break;case"NurbsCurve":break;case"LimbNode":case"Root":break;case"Null":default:break}a.ID=t,this.getTransformData(a,r),n.set(t,a)}return n}parseBufObjTransData(t,e,r,s){const i=s.Objects.Model,a=i[e];this.getTransformData(t,a),t.parent&&(t.userData.transformData.parentMatrix=a.parent.matrix,t.userData.transformData.parentMatrixWorld=a.parent.matrixWorld);const o=n.generateTransform(t.userData.transformData);t.transform=o}getTransformData(t,e){const r={};"InheritType"in e&&(r.inheritType=parseInt(e.InheritType.value)),r.eulerOrder="RotationOrder"in e?n.getEulerOrder(e.RotationOrder.value):"ZYX","Lcl_Translation"in e&&(r.translation=e.Lcl_Translation.value),"PreRotation"in e&&(r.preRotation=e.PreRotation.value),"Lcl_Rotation"in e&&(r.rotation=e.Lcl_Rotation.value),"PostRotation"in e&&(r.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(r.scale=e.Lcl_Scaling.value),"ScalingOffset"in e&&(r.scalingOffset=e.ScalingOffset.value),"ScalingPivot"in e&&(r.scalingPivot=e.ScalingPivot.value),"RotationOffset"in e&&(r.rotationOffset=e.RotationOffset.value),"RotationPivot"in e&&(r.rotationPivot=e.RotationPivot.value),t.userData.transformData=r}parseBegin(t,e){this.m_fbxTree=t,this.m_connections=this.parseConnections(t.map);const r=this.parseDeformers(t.map,this.m_connections);this.m_geomParser=new s.GeometryBufferParser,this.m_geomParser.setReader(e),this.m_geomParser.parseGeomBufBegin(r,t.map,this.m_connections)}getGeomBufId(){return null!=this.m_geomParser?this.m_geomParser.getGeomBufId():-1}parseGeomBufNext(){let t;if(null!=this.m_geomParser){t=this.m_geomParser.parseGeomBufNext();t.ID;const e=this.m_connections.get(t.id);let r="";r=e.parents[0].ID+"",this.parseBufObjTransData(t,r,this.m_connections,this.m_fbxTree.map)}return t}parseGeomBufAt(t){let e;if(null!=this.m_geomParser){e=this.m_geomParser.parseGeomBufAt(t);const r=this.m_connections.get(e.id);let n="";n=r.parents[0].ID+"",this.parseBufObjTransData(e,n,this.m_connections,this.m_fbxTree.map)}return e}isParsing(){return null!=this.m_geomParser&&this.m_geomParser.isParsing()}getParseTotal(){return null!=this.m_geomParser?this.m_geomParser.getParseTotal():0}parseConnections(t){const e=new Map;if("Connections"in t){const r=t.Connections.connections;r.forEach((function(t){const r=t[0],n=t[1],s=t[2];e.has(r)||e.set(r,{parents:[],children:[]});const i={ID:n,relationship:s};e.get(r).parents.push(i),e.has(n)||e.set(n,{parents:[],children:[]});const a={ID:r,relationship:s};e.get(n).children.push(a)}))}return e}parseDeformers(t,e){const r={},n={};return{skeletons:r,morphTargets:n}}}e.FBXTreeBufferParser=i},"8e17":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=180/Math.PI,s=1e-7;class i{constructor(t=0,e=0,r=0,n=1){this.x=0,this.y=0,this.z=0,this.w=0,this.x=t,this.y=e,this.z=r,this.w=n}clone(){return new i(this.x,this.y,this.z,this.w)}abs(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this}setTo(t,e,r,n=1){return this.x=t,this.y=e,this.z=r,this.w=n,this}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,this}fromArray4(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray4(t,e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this}setXYZ(t,e,r){return this.x=t,this.y=e,this.z=r,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}multBy(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return t>s&&(this.x/=t,this.y/=t,this.z/=t),this}normalizeTo(t){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);e>s?(t.x=this.x/e,t.y=this.y/e,t.z=this.z/e):(t.x=this.x,t.y=this.y,t.z=this.z)}scaleVector(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}scaleBy(t){return this.x*=t,this.y*=t,this.z*=t,this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}equalsXYZ(t){return Math.abs(this.x-t.x)<s&&Math.abs(this.y-t.y)<s&&Math.abs(this.z-t.z)<s}equalsAll(t){return Math.abs(this.x-t.x)<s&&Math.abs(this.y-t.y)<s&&Math.abs(this.z-t.z)<s&&Math.abs(this.w-t.w)<s}project(){let t=1/this.w;this.x*=t,this.y*=t,this.z*=t}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}getLengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}addBy(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}subtractBy(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subtract(t){return new i(this.x-t.x,this.y-t.y,this.z-t.z)}add(t){return new i(this.x+t.x,this.y+t.y,this.z+t.z)}crossProduct(t){return new i(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossBy(t){let e=this.y*t.z-this.z*t.y,r=this.z*t.x-this.x*t.z,n=this.x*t.y-this.y*t.x;return this.x=e,this.y=r,this.z=n,this}reflectBy(t){let e=2*(this.x*t.x+this.y*t.y+this.z*t.z);return this.x=this.x-e*t.x,this.y=this.y-e*t.y,this.z=this.z-e*t.z,this}scaleVecTo(t,e){return this.x=t.x*e,this.y=t.y*e,this.z=t.z*e,this}subVecsTo(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}addVecsTo(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}crossVecsTo(t,e){return this.x=t.y*e.z-t.z*e.y,this.y=t.z*e.x-t.x*e.z,this.z=t.x*e.y-t.y*e.x,this}toString(){return"Vector3D("+this.x+this.y+this.z+")"}static Cross(t,e,r){r.x=t.y*e.z-t.z*e.y,r.y=t.z*e.x-t.x*e.z,r.z=t.x*e.y-t.y*e.x}static CrossSubtract(t,e,r,n,s){a.x=e.x-t.x,a.y=e.y-t.y,a.z=e.z-t.z,o.x=n.x-r.x,o.y=n.y-r.y,o.z=n.z-r.z,t=a,r=o,s.x=t.y*r.z-t.z*r.y,s.y=t.z*r.x-t.x*r.z,s.z=t.x*r.y-t.y*r.x}static Subtract(t,e,r){r.x=t.x-e.x,r.y=t.y-e.y,r.z=t.z-e.z}static DistanceSquared(t,e){return a.x=t.x-e.x,a.y=t.y-e.y,a.z=t.z-e.z,a.getLengthSquared()}static DistanceXYZ(t,e,r,n,s,i){return a.x=t-n,a.y=e-s,a.z=r-i,a.getLength()}static Distance(t,e){return a.x=t.x-e.x,a.y=t.y-e.y,a.z=t.z-e.z,a.getLength()}static AngleBetween(t,e){return t.normalizeTo(a),e.normalizeTo(o),Math.acos(a.dot(o))*n}static RadianBetween(t,e){return t.normalizeTo(a),e.normalizeTo(o),Math.acos(a.dot(o))}static RadianBetween2(t,e){let r=t.getLengthSquared(),n=e.getLengthSquared();return a.x=t.x-e.x,a.y=t.y-e.y,a.z=t.z-e.z,Math.acos((r+n-a.getLengthSquared())/(2*Math.sqrt(r)*Math.sqrt(n)))}static Reflect(t,e,r){let n=2*(t.x*e.x+t.y*e.y+t.z*e.z);r.x=t.x-n*e.x,r.y=t.y-n*e.y,r.z=t.z-n*e.z}static VerticalCCWOnXOY(t){const e=t.x;t.x=-t.y,t.y=e}static VerticalCWOnXOY(t){const e=t.y;t.y=-t.x,t.x=e}}i.X_AXIS=new i(1,0,0),i.Y_AXIS=new i(0,1,0),i.Z_AXIS=new i(0,0,1),i.ZERO=new i(0,0,0),i.ONE=new i(1,1,1),e.default=i;const a=new i,o=new i},9259:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("9a2d"),s=r("f689");class i{constructor(){this.currentIndent=0,this.allNodes=new n.FBXTree,this.nodeStack=[],this.currentProp=[],this.currentPropName=""}getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,e){this.currentProp=t,this.currentPropName=e}parse(t){this.currentIndent=0,this.allNodes=new n.FBXTree,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const e=this,r=t.split(/[\r\n]+/);return r.forEach((function(t,n){const s=t.match(/^[\s\t]*;/),i=t.match(/^[\s\t]*$/);if(s||i)return;const a=t.match("^\\t{"+e.currentIndent+"}(\\w+):(.*){"),o=t.match("^\\t{"+e.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=t.match("^\\t{"+(e.currentIndent-1)+"}}");a?e.parseNodeBegin(t,a):o?e.parseNodeProperty(t,o,r[++n]):l?e.popStack():t.match(/^[^\s\t}]/)&&e.parseNodePropertyContinued(t)})),this.allNodes}parseNodeBegin(t,e){const r=e[1].trim().replace(/^"/,"").replace(/"$/,""),n=e[2].split(",").map((function(t){return t.trim().replace(/^"/,"").replace(/"$/,"")})),s={name:r},i=this.parseNodeAttr(n),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,s):r in a?("PoseNode"===r?a.PoseNode.push(s):void 0!==a[r].id&&(a[r]={},a[r][a[r].id]=a[r]),""!==i.id&&(a[r][i.id]=s)):"number"===typeof i.id?(a[r]={},a[r][i.id]=s):"Properties70"!==r&&(a[r]="PoseNode"===r?[s]:s),"number"===typeof i.id&&(s.id=i.id),""!==i.name&&(s.attrName=i.name),""!==i.type&&(s.attrType=i.type),this.pushStack(s)}parseNodeAttr(t){let e=t[0];""!==t[0]&&(e=parseInt(t[0]),isNaN(e)&&(e=t[0]));let r="",n="";return t.length>1&&(r=t[1].replace(/^(\w+)::/,""),n=t[2]),{id:e,name:r,type:n}}parseNodeProperty(t,e,r){let n=e[1].replace(/^"/,"").replace(/"$/,"").trim(),i=e[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===i&&(i=r.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode(),o=a.name;if("Properties70"!==o){if("C"===n){const t=i.split(",").slice(1),e=parseInt(t[0]),r=parseInt(t[1]);let o=i.split(",").slice(3);o=o.map((function(t){return t.trim().replace(/^"/,"")})),n="connections",i=[e,r],s.append(i,o),void 0===a[n]&&(a[n]=[])}"Node"===n&&(a.id=i),n in a&&Array.isArray(a[n])?a[n].push(i):"a"!==n?a[n]=i:a.a=i,this.setCurrentProp(a,n),"a"===n&&","!==i.slice(-1)&&(a.a=s.parseNumberArray(i))}else this.parseNodeSpecialProperty(t,n,i)}parseNodePropertyContinued(t){const e=this.getCurrentNode();e.a+=t,","!==t.slice(-1)&&(e.a=s.parseNumberArray(e.a))}parseNodeSpecialProperty(t,e,r){const n=r.split('",').map((function(t){return t.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=n[0],a=n[1],o=n[2],l=n[3];let h=n[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=s.parseNumberArray(h);break}this.getPrevNode()[i]={type:a,type2:o,flag:l,value:h},this.setCurrentProp(this.getPrevNode(),i)}}e.TextParser=i},"937b":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("f7ee"),s=r("9a2d"),i=r("c758");class a{constructor(){this.m_reader=null,this.m_allNodes=null,this.m_version=0,this.m_parsing=!1,this.m_parsingIndex=0,this.subLossTime=0,this.nodeParsingTotal=0,this.totalBP=0,this.totalBPTime=0,this.m_isObjects=!1,this.m_isGeometry=!1,this.m_debug=!1,this.m_pptParser=new i.BufPropertyParser}parse(t){const e=new n.BinaryReader(t);e.skip(23);const r=e.getUint32();if(r<6400)throw alert("FBXLoader: FBX version not supported, FileVersion: "+r),new Error("FBXLoader: FBX version not supported, FileVersion: "+r);const i=new s.FBXTree;while(!this.endOfContent(e)){const t=this.parseNode(e,r);null!==t&&i.add(t.name,t)}return i}getFBXTree(){return this.m_allNodes}getReader(){return this.m_reader}parseBegin(t){let e=new n.BinaryReader(t);e.skip(23);const r=e.getUint32();if(r<6400)throw alert("FBXLoader: FBX version not supported, FileVersion: "+r),new Error("FBXLoader: FBX version not supported, FileVersion: "+r);this.m_reader=e,this.m_version=r,this.m_parsingIndex=0;let i=new s.FBXTree;return this.m_allNodes=i,this.m_parsing=!this.endOfContent(e),i}parseNext(){const t=this.m_allNodes,e=this.m_reader;if(this.m_parsing=!this.endOfContent(e),this.subLossTime=0,this.nodeParsingTotal=0,this.m_parsing){this.m_parsingIndex++;Date.now();const r=this.parseNode(e,this.m_version);if(null!=r){void 0!=r.name&&r.name}null!==r&&t.add(r.name,r)}}isParsing(){return this.m_parsing}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,e){this.nodeParsingTotal++;const r={},n=e>=7500?t.getUint64():t.getUint32(),s=e>=7500?t.getUint64():t.getUint32();e>=7500?t.getUint64():t.getUint32();const i=t.getUint8(),a=t.getString(i);if(this.m_debug&&("Objects"==a&&(this.m_isObjects=!0),this.m_isObjects&&"Geometry"==a&&(this.m_isGeometry=!0),this.m_isGeometry),0===n)return null;const o=new Array(s);switch(this.m_pptParser.ppFlag=0,a){case"Vertices":case"Normals":case"PolygonVertexIndex":case"UV":case"NormalsIndex":this.m_pptParser.ppFlag=12;break;case"Edges":case"NormalsW":case"Materials":this.m_pptParser.ppFlag=131;break;default:break}for(let c=0;c<s;c++)o[c]=this.m_pptParser.parseProperty(t);const l=o.length>0?o[0]:"",h=o.length>1?o[1]:"",u=o.length>2?o[2]:"";r.singleProperty=1===s&&t.getOffset()===n;while(n>t.getOffset()){const n=this.parseNode(t,e);null!==n&&this.parseSubNode(a,r,n)}return r.propertyList=o,"number"===typeof l&&(r.id=l),""!==h&&(r.attrName=h),""!==u&&(r.attrType=u),""!==a&&(r.name=a),r}parseSubNode(t,e,r){if(!0===r.singleProperty){const t=r.propertyList[0];t.buffer,t instanceof Array?(e[r.name]=r,r.a=t):e[r.name]=t}else if("Connections"===t&&"C"===r.name){let t=r.propertyList,n=t.length-1;n<0&&(n=0);const s=new Array(n);for(let e=1,r=0;e<t.length;++e)s[r]=t[e],r++;void 0===e.connections&&(e.connections=[]),e.connections.push(s)}else if("Properties70"===r.name){const t=Object.keys(r);t.forEach((function(t){e[t]=r[t]}))}else if("Properties70"===t&&"P"===r.name){let t=r.propertyList[0],n=r.propertyList[1];const s=r.propertyList[2],i=r.propertyList[3];let a;0===t.indexOf("Lcl ")&&(t=t.replace("Lcl ","Lcl_")),0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),a="Color"===n||"ColorRGB"===n||"Vector"===n||"Vector3D"===n||0===n.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],e[t]={type:n,type2:s,flag:i,value:a}}else void 0===e[r.name]?"number"===typeof r.id?(e[r.name]={},e[r.name][r.id]=r):e[r.name]=r:"PoseNode"===r.name?(Array.isArray(e[r.name])||(e[r.name]=[e[r.name]]),e[r.name].push(r)):void 0===e[r.name][r.id]&&(e[r.name][r.id]=r)}}e.BufferBinaryParser=a},"9a2d":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(){this.map={}}add(t,e){this.map[t]=e}}e.FBXTree=n},"9cb6":function(t,e,r){"use strict";r.r(e),r.d(e,"Deflate",(function(){return kt})),r.d(e,"AsyncDeflate",(function(){return Rt})),r.d(e,"deflate",(function(){return Nt})),r.d(e,"deflateSync",(function(){return Xt})),r.d(e,"Inflate",(function(){return Dt})),r.d(e,"AsyncInflate",(function(){return Ct})),r.d(e,"inflate",(function(){return Gt})),r.d(e,"inflateSync",(function(){return Ut})),r.d(e,"Gzip",(function(){return Vt})),r.d(e,"AsyncGzip",(function(){return Zt})),r.d(e,"gzip",(function(){return jt})),r.d(e,"gzipSync",(function(){return Yt})),r.d(e,"Gunzip",(function(){return Ht})),r.d(e,"AsyncGunzip",(function(){return qt})),r.d(e,"gunzip",(function(){return Qt})),r.d(e,"gunzipSync",(function(){return $t})),r.d(e,"Zlib",(function(){return Wt})),r.d(e,"AsyncZlib",(function(){return Kt})),r.d(e,"zlib",(function(){return Jt})),r.d(e,"zlibSync",(function(){return te})),r.d(e,"Unzlib",(function(){return ee})),r.d(e,"AsyncUnzlib",(function(){return re})),r.d(e,"unzlib",(function(){return ne})),r.d(e,"unzlibSync",(function(){return se})),r.d(e,"compress",(function(){return jt})),r.d(e,"AsyncCompress",(function(){return Zt})),r.d(e,"compressSync",(function(){return Yt})),r.d(e,"Compress",(function(){return Vt})),r.d(e,"Decompress",(function(){return ie})),r.d(e,"AsyncDecompress",(function(){return ae})),r.d(e,"decompress",(function(){return oe})),r.d(e,"decompressSync",(function(){return le})),r.d(e,"DecodeUTF8",(function(){return de})),r.d(e,"EncodeUTF8",(function(){return me})),r.d(e,"strToU8",(function(){return ye})),r.d(e,"strFromU8",(function(){return ge})),r.d(e,"ZipPassThrough",(function(){return Fe})),r.d(e,"ZipDeflate",(function(){return Se})),r.d(e,"AsyncZipDeflate",(function(){return Te})),r.d(e,"Zip",(function(){return Pe})),r.d(e,"zip",(function(){return Ae})),r.d(e,"zipSync",(function(){return Ie})),r.d(e,"UnzipPassThrough",(function(){return Be})),r.d(e,"UnzipInflate",(function(){return Oe})),r.d(e,"AsyncUnzipInflate",(function(){return Le})),r.d(e,"Unzip",(function(){return Ee})),r.d(e,"unzip",(function(){return ke})),r.d(e,"unzipSync",(function(){return Re}));
/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/
var n=Uint8Array,s=Uint16Array,i=Uint32Array,a=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(t,e){for(var r=new s(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];var a=new i(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)a[o]=o-r[n]<<5|n;return[r,a]},u=h(a,2),c=u[0],f=u[1];c[28]=258,f[258]=28;for(var p=h(o,0),d=p[0],m=p[1],y=new s(32768),g=0;g<32768;++g){var _=(43690&g)>>>1|(21845&g)<<1;_=(52428&_)>>>2|(13107&_)<<2,_=(61680&_)>>>4|(3855&_)<<4,y[g]=((65280&_)>>>8|(255&_)<<8)>>>1}var x=new n(288),v=function(t,e,r){for(var n=t.length,i=0,a=new s(e);i<n;++i)++a[t[i]-1];var o,l=new s(e);for(i=0;i<e;++i)l[i]=l[i-1]+a[i-1]<<1;if(r){o=new s(1<<e);var h=15-e;for(i=0;i<n;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],f=l[t[i]-1]++<<c,p=f|(1<<c)-1;f<=p;++f)o[y[f]>>>h]=u}else for(o=new s(n),i=0;i<n;++i)t[i]&&(o[i]=y[l[t[i]-1]++]>>>15-t[i]);return o},w=x;for(g=0;g<144;++g)w[g]=8;for(g=144;g<256;++g)w[g]=9;for(g=256;g<280;++g)w[g]=7;for(g=280;g<288;++g)w[g]=8;var b=new n(32);for(g=0;g<32;++g)b[g]=5;var M=v(w,9,0),z=v(w,9,1),F=v(b,5,0),S=v(b,5,1),T=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},P=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&r},A=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(7&e)},I=function(t){return(t/8|0)+(7&t&&1)},B=function(t,e,r){(null==e||e<0)&&(e=0),(null==r||r>t.length)&&(r=t.length);var a=new(t instanceof s?s:t instanceof i?i:n)(r-e);return a.set(t.subarray(e,r)),a},O=function(t,e,r){return t},L=new n(19);let E=new n(1024);function k(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}let R=new Array(128);R.fill(null);let N=0;var X=function(t,e,r){var s=t.length;if(!s||r&&!r.l&&s<5)return e||new n(0);var i=!e||r,h=!r||r.i;if(r||(r={}),!e){N=s;let t=k(N),r=Math.log2(t);e=R[r],null==e&&(e=new n(t),R[r]=e)}var u=function(t){var r=e.length;if(t>r){N=t;let r=k(N),i=Math.log2(r);var s=R[i];null==s&&(N<=536870912?(s=new n(r),R[i]=s):(r=N+262144,s=new n(r))),s.set(e),e=s}},f=r.f||0,p=r.p||0,m=r.b||0,y=r.l,g=r.d,_=r.m,x=r.n;let w=8*s;do{if(!y){r.f=f=P(t,p,1);var b=P(t,p+1,3);if(p+=3,!b){var M=I(p)+4,F=t[M-4]|t[M-3]<<8,B=M+F;if(B>s){if(h)throw"unexpected EOF";break}i&&u(m+F),e.set(t.subarray(M,B),m),r.b=m+=F,r.p=p=8*B;continue}if(1==b)y=z,g=S,_=9,x=5;else{if(2!=b)throw"invalid block type";{var X=P(t,p,31)+257,D=P(t,p+10,15)+4,C=X+P(t,p+5,31)+1;p+=14;let e=E.subarray(0,C);for(let t=0;t<C;++t)e[t]=0;let r=L;for(let t=0;t<19;++t)r[t]=0;for(var G=0;G<D;++G)r[l[G]]=P(t,p+3*G,7);p+=3*D;var U=T(r),V=(1<<U)-1,Z=v(r,U,1);for(G=0;G<C;){var j=Z[P(t,p,V)];p+=15&j;M=j>>>4;if(M<16)e[G++]=M;else{var Y=0,H=0;16==M?(H=3+P(t,p,3),p+=2,Y=e[G-1]):17==M?(H=3+P(t,p,7),p+=3):18==M&&(H=11+P(t,p,127),p+=7);while(H--)e[G++]=Y}}var q=e.subarray(0,X),Q=e.subarray(X);_=T(q),x=T(Q),y=v(q,_,1),g=v(Q,x,1)}}if(p>w){if(h)throw"unexpected EOF";break}}i&&u(m+131072);for(var $=(1<<_)-1,W=(1<<x)-1,K=p;;K=p){Y=y[A(t,p)&$];var J=Y>>>4;if(p+=15&Y,p>w){if(h)throw"unexpected EOF";break}if(!Y)throw"invalid length/literal";if(J<256)e[m++]=J;else{if(256==J){K=p,y=null;break}var tt=J-254;if(J>264){G=J-257;var et=a[G];tt=P(t,p,(1<<et)-1)+c[G],p+=et}var rt=g[A(t,p)&W],nt=rt>>>4;if(!rt)throw"invalid distance";p+=15&rt;Q=d[nt];if(nt>3){et=o[nt];Q+=A(t,p)&(1<<et)-1,p+=et}if(p>w){if(h)throw"unexpected EOF";break}i&&u(m+131072);for(var st=m+tt;m<st;m+=4)e[m]=e[m-Q],e[m+1]=e[m+1-Q],e[m+2]=e[m+2-Q],e[m+3]=e[m+3-Q];m=st}}r.l=y,r.p=K,r.b=m,y&&(f=1,r.m=_,r.d=g,r.n=x)}while(!f);return m==e.length?e:O(e,0,m)},D=function(t,e,r){r<<=7&e;var n=e/8|0;t[n]|=r,t[n+1]|=r>>>8},C=function(t,e,r){r<<=7&e;var n=e/8|0;t[n]|=r,t[n+1]|=r>>>8,t[n+2]|=r>>>16},G=function(t,e){for(var r=[],i=0;i<t.length;++i)t[i]&&r.push({s:i,f:t[i]});var a=r.length,o=r.slice();if(!a)return[$,0];if(1==a){var l=new n(r[0].s+1);return l[r[0].s]=1,[l,1]}r.sort((function(t,e){return t.f-e.f})),r.push({s:-1,f:25001});var h=r[0],u=r[1],c=0,f=1,p=2;r[0]={s:-1,f:h.f+u.f,l:h,r:u};while(f!=a-1)h=r[r[c].f<r[p].f?c++:p++],u=r[c!=f&&r[c].f<r[p].f?c++:p++],r[f++]={s:-1,f:h.f+u.f,l:h,r:u};var d=o[0].s;for(i=1;i<a;++i)o[i].s>d&&(d=o[i].s);var m=new s(d+1),y=U(r[f-1],m,0);if(y>e){i=0;var g=0,_=y-e,x=1<<_;for(o.sort((function(t,e){return m[e.s]-m[t.s]||t.f-e.f}));i<a;++i){var v=o[i].s;if(!(m[v]>e))break;g+=x-(1<<y-m[v]),m[v]=e}g>>>=_;while(g>0){var w=o[i].s;m[w]<e?g-=1<<e-m[w]++-1:++i}for(;i>=0&&g;--i){var b=o[i].s;m[b]==e&&(--m[b],++g)}y=e}return[new n(m),y]},U=function(t,e,r){return-1==t.s?Math.max(U(t.l,e,r+1),U(t.r,e,r+1)):e[t.s]=r},V=function(t){var e=t.length;while(e&&!t[--e]);for(var r=new s(++e),n=0,i=t[0],a=1,o=function(t){r[n++]=t},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}while(a--)o(i);a=1,i=t[l]}return[r.subarray(0,n),e]},Z=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},j=function(t,e,r){var n=r.length,s=I(e+2);t[s]=255&n,t[s+1]=n>>>8,t[s+2]=255^t[s],t[s+3]=255^t[s+1];for(var i=0;i<n;++i)t[s+i+4]=r[i];return 8*(s+4+n)};let Y=new s(19),H=new s(19);var q=function(t,e,r,n,s,i,h,u,c,f,p){D(e,p++,r),++s[256];var d=G(s,15),m=d[0],y=d[1],g=G(i,15),_=g[0],x=g[1],z=V(m),S=z[0],T=z[1],P=V(_),A=P[0],I=P[1];let B=H;B.set(Y);for(var O=0;O<S.length;++O)B[31&S[O]]++;for(O=0;O<A.length;++O)B[31&A[O]]++;for(var L=G(B,7),E=L[0],k=L[1],R=19;R>4&&!E[l[R-1]];--R);var N,X,U,q,Q=f+5<<3,$=Z(s,w)+Z(i,b)+h,W=Z(s,m)+Z(i,_)+h+14+3*R+Z(B,E)+(2*B[16]+3*B[17]+7*B[18]);if(Q<=$&&Q<=W)return j(e,p,t.subarray(c,c+f));if(D(e,p,1+(W<$)),p+=2,W<$){N=v(m,y,0),X=m,U=v(_,x,0),q=_;var K=v(E,k,0);D(e,p,T-257),D(e,p+5,I-1),D(e,p+10,R-4),p+=14;for(O=0;O<R;++O)D(e,p+3*O,E[l[O]]);p+=3*R;for(var J=[S,A],tt=0;tt<2;++tt){var et=J[tt];for(O=0;O<et.length;++O){var rt=31&et[O];D(e,p,K[rt]),p+=E[rt],rt>15&&(D(e,p,et[O]>>>5&127),p+=et[O]>>>12)}}}else N=M,X=w,U=F,q=b;for(O=0;O<u;++O)if(n[O]>255){rt=n[O]>>>18&31;C(e,p,N[rt+257]),p+=X[rt+257],rt>7&&(D(e,p,n[O]>>>23&31),p+=a[rt]);var nt=31&n[O];C(e,p,U[nt]),p+=q[nt],nt>3&&(C(e,p,n[O]>>>5&8191),p+=o[nt])}else C(e,p,N[n[O]]),p+=X[n[O]];return C(e,p,N[256]),p+X[256]},Q=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$=new n(0);let W=new i(25e3),K=new i(25e3),J=new s(288),tt=new s(32),et=new s(288),rt=new s(32);var nt=function(t,e,r,i,l,h){var u=t.length,c=new n(i+u+5*(1+Math.ceil(u/7e3))+l),p=c.subarray(i,c.length-l),d=0;if(!e||u<8)for(var y=0;y<=u;y+=65535){var g=y+65535;g<u?d=j(p,d,t.subarray(y,g)):(p[y]=h,d=j(p,d,t.subarray(y,u)))}else{var _=Q[e-1],x=_>>>13,v=8191&_,w=(1<<r)-1,b=new s(32768),M=new s(w+1),z=Math.ceil(r/3),F=2*z,S=function(e){return(t[e]^t[e+1]<<z^t[e+2]<<F)&w};let n=K;n.set(W);let i=et;i.set(J);let l=rt;l.set(tt);let c=0,y=0,g=0,I=0,B=0,it=0;for(;g<u;++g){var T=S(g),P=32767&g,A=M[T];if(b[P]=A,M[T]=P,B<=g){var O=u-g;if((c>7e3||I>24576)&&O>423){d=q(t,p,0,n,i,l,y,I,it,g-it,d),I=c=y=0,it=g;for(var L=0;L<286;++L)i[L]=0;for(L=0;L<30;++L)l[L]=0}var E=2,k=0,R=v,N=P-A&32767;if(O>2&&T==S(g-N)){var X=Math.min(x,O)-1,D=Math.min(32767,g),C=Math.min(258,O);while(N<=D&&--R&&P!=A){if(t[g+E]==t[g+E-N]){for(var G=0;G<C&&t[g+G]==t[g+G-N];++G);if(G>E){if(E=G,k=N,G>X)break;var U=Math.min(N,G-2),V=0;for(L=0;L<U;++L){var Z=g-N+L+32768&32767,Y=b[Z],H=Z-Y+32768&32767;H>V&&(V=H,A=Z)}}}P=A,A=b[P],N+=P-A+32768&32767}}if(k){n[I++]=268435456|f[E]<<18|m[k];var nt=31&f[E],st=31&m[k];y+=a[nt]+o[st],++i[257+nt],++l[st],B=g+E,++c}else n[I++]=t[g],++i[t[g]]}}d=q(t,p,h,n,i,l,y,I,it,g-it,d),!h&&7&d&&(d=j(p,d+1,$))}return B(c,0,i+I(d)+l)},st=function(){for(var t=new i(256),e=0;e<256;++e){var r=e,n=9;while(--n)r=(1&r&&3988292384)^r>>>1;t[e]=r}return t}(),it=function(){var t=-1;return{p:function(e){for(var r=t,n=0;n<e.length;++n)r=st[255&r^e[n]]^r>>>8;t=r},d:function(){return~t}}},at=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length,a=0;a!=i;){for(var o=Math.min(a+2655,i);a<o;++a)s+=n+=r[a];n=(65535&n)+15*(n>>16),s=(65535&s)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(255&t)<<24|t>>>8<<16|(255&e)<<8|e>>>8}}},ot=function(t,e,r,n,s){return nt(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,r,n,!s)},lt=function(t,e){var r={};for(var n in t)r[n]=t[n];for(var n in e)r[n]=e[n];return r},ht=function(t,e,r){for(var n=t(),s=t.toString(),i=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<n.length;++a){var o=n[a],l=i[a];if("function"==typeof o){e+=";"+l+"=";var h=o.toString();if(o.prototype)if(-1!=h.indexOf("[native code]")){var u=h.indexOf(" ",8)+1;e+=h.slice(u,h.indexOf("(",u))}else for(var c in e+=h,o.prototype)e+=";"+l+".prototype."+c+"="+o.prototype[c].toString();else e+=h}else r[l]=o}return[e,r]},ut=[],ct=function(t){var e=[];for(var r in t)(t[r]instanceof n||t[r]instanceof s||t[r]instanceof i)&&e.push((t[r]=new t[r].constructor(t[r])).buffer);return e},ft=function(t,e,r,n){var s;if(!ut[r]){for(var i="",a={},o=t.length-1,l=0;l<o;++l)s=ht(t[l],i,a),i=s[0],a=s[1];ut[r]=ht(t[o],i,a)}var h=lt({},ut[r][1]);return wk(ut[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",r,h,ct(h),n)},pt=function(){return[n,s,i,a,o,l,c,d,z,S,y,v,T,P,A,I,B,X,Ut,xt,vt]},dt=function(){return[n,s,i,a,o,l,f,m,M,w,F,b,y,Q,$,v,D,C,G,U,V,Z,j,q,I,B,nt,ot,Xt,xt]},mt=function(){return[Pt,Bt,Tt,it,st]},yt=function(){return[At,It]},gt=function(){return[Ot,Tt,at]},_t=function(){return[Lt]},xt=function(t){return postMessage(t,[t.buffer])},vt=function(t){return t&&t.size&&new n(t.size)},wt=function(t,e,r,n,s,i){var a=ft(r,n,s,(function(t,e){a.terminate(),i(t,e)}));return a.postMessage([t,e],e.consume?[t.buffer]:[]),function(){a.terminate()}},bt=function(t){return t.ondata=function(t,e){return postMessage([t,e],[t.buffer])},function(e){return t.push(e.data[0],e.data[1])}},Mt=function(t,e,r,n,s){var i,a=ft(t,n,s,(function(t,r){t?(a.terminate(),e.ondata.call(e,t)):(r[1]&&a.terminate(),e.ondata.call(e,t,r[0],r[1]))}));a.postMessage(r),e.push=function(t,r){if(i)throw"stream finished";if(!e.ondata)throw"no stream handler";a.postMessage([t,i=r],[t.buffer])},e.terminate=function(){a.terminate()}},zt=function(t,e){return t[e]|t[e+1]<<8},Ft=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},St=function(t,e){return Ft(t,e)+4294967296*Ft(t,e+4)},Tt=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Pt=function(t,e){var r=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&Tt(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),r){t[3]=8;for(var n=0;n<=r.length;++n)t[n+10]=r.charCodeAt(n)}},At=function(t){if(31!=t[0]||139!=t[1]||8!=t[2])throw"invalid gzip data";var e=t[3],r=10;4&e&&(r+=t[10]|2+(t[11]<<8));for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[r++]);return r+(2&e)},It=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Bt=function(t){return 10+(t.filename&&t.filename.length+1||0)},Ot=function(t,e){var r=e.level,n=0==r?0:r<6?1:9==r?3:2;t[0]=120,t[1]=n<<6|(n?32-2*n:1)},Lt=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function Et(t,e){return e||"function"!=typeof t||(e=t,t={}),this.ondata=e,t}var kt=function(){function t(t,e){e||"function"!=typeof t||(e=t,t={}),this.ondata=e,this.o=t||{}}return t.prototype.p=function(t,e){this.ondata(ot(t,this.o,0,0,!e),e)},t.prototype.push=function(t,e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=e,this.p(t,e||!1)},t}(),Rt=function(){function t(t,e){Mt([dt,function(){return[bt,kt]}],this,Et.call(this,t,e),(function(t){var e=new kt(t.data);onmessage=bt(e)}),6)}return t}();function Nt(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return wt(t,e,[dt],(function(t){return xt(Xt(t.data[0],t.data[1]))}),0,r)}function Xt(t,e){return ot(t,e||{},0,0)}var Dt=function(){function t(t){this.s={},this.p=new n(0),this.ondata=t}return t.prototype.e=function(t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var e=this.p.length,r=new n(e+t.length);r.set(this.p),r.set(t,e),this.p=r},t.prototype.c=function(t){this.d=this.s.i=t||!1;var e=this.s.b,r=X(this.p,this.o,this.s);this.ondata(B(r,e,this.s.b),this.d),this.o=B(r,this.s.b-32768),this.s.b=this.o.length,this.p=B(this.p,this.s.p/8|0),this.s.p&=7},t.prototype.push=function(t,e){this.e(t),this.c(e)},t}(),Ct=function(){function t(t){this.ondata=t,Mt([pt,function(){return[bt,Dt]}],this,0,(function(){var t=new Dt;onmessage=bt(t)}),7)}return t}();function Gt(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return wt(t,e,[pt],(function(t){return xt(Ut(t.data[0],vt(t.data[1])))}),1,r)}function Ut(t,e){return X(t,e)}var Vt=function(){function t(t,e){this.c=it(),this.l=0,this.v=1,kt.call(this,t,e)}return t.prototype.push=function(t,e){kt.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t),this.l+=t.length;var r=ot(t,this.o,this.v&&Bt(this.o),e&&8,!e);this.v&&(Pt(r,this.o),this.v=0),e&&(Tt(r,r.length-8,this.c.d()),Tt(r,r.length-4,this.l)),this.ondata(r,e)},t}(),Zt=function(){function t(t,e){Mt([dt,mt,function(){return[bt,kt,Vt]}],this,Et.call(this,t,e),(function(t){var e=new Vt(t.data);onmessage=bt(e)}),8)}return t}();function jt(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return wt(t,e,[dt,mt,function(){return[Yt]}],(function(t){return xt(Yt(t.data[0],t.data[1]))}),2,r)}function Yt(t,e){e||(e={});var r=it(),n=t.length;r.p(t);var s=ot(t,e,Bt(e),8),i=s.length;return Pt(s,e),Tt(s,i-8,r.d()),Tt(s,i-4,n),s}var Ht=function(){function t(t){this.v=1,Dt.call(this,t)}return t.prototype.push=function(t,e){if(Dt.prototype.e.call(this,t),this.v){var r=this.p.length>3?At(this.p):4;if(r>=this.p.length&&!e)return;this.p=this.p.subarray(r),this.v=0}if(e){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Dt.prototype.c.call(this,e)},t}(),qt=function(){function t(t){this.ondata=t,Mt([pt,yt,function(){return[bt,Dt,Ht]}],this,0,(function(){var t=new Ht;onmessage=bt(t)}),9)}return t}();function Qt(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return wt(t,e,[pt,yt,function(){return[$t]}],(function(t){return xt($t(t.data[0]))}),3,r)}function $t(t,e){return X(t.subarray(At(t),-8),e||new n(It(t)))}var Wt=function(){function t(t,e){this.c=at(),this.v=1,kt.call(this,t,e)}return t.prototype.push=function(t,e){kt.prototype.push.call(this,t,e)},t.prototype.p=function(t,e){this.c.p(t);var r=ot(t,this.o,this.v&&2,e&&4,!e);this.v&&(Ot(r,this.o),this.v=0),e&&Tt(r,r.length-4,this.c.d()),this.ondata(r,e)},t}(),Kt=function(){function t(t,e){Mt([dt,gt,function(){return[bt,kt,Wt]}],this,Et.call(this,t,e),(function(t){var e=new Wt(t.data);onmessage=bt(e)}),10)}return t}();function Jt(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return wt(t,e,[dt,gt,function(){return[te]}],(function(t){return xt(te(t.data[0],t.data[1]))}),4,r)}function te(t,e){e||(e={});var r=at();r.p(t);var n=ot(t,e,2,4);return Ot(n,e),Tt(n,n.length-4,r.d()),n}var ee=function(){function t(t){this.v=1,Dt.call(this,t)}return t.prototype.push=function(t,e){if(Dt.prototype.e.call(this,t),this.v){if(this.p.length<2&&!e)return;this.p=this.p.subarray(2),this.v=0}if(e){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Dt.prototype.c.call(this,e)},t}(),re=function(){function t(t){this.ondata=t,Mt([pt,_t,function(){return[bt,Dt,ee]}],this,0,(function(){var t=new ee;onmessage=bt(t)}),11)}return t}();function ne(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return wt(t,e,[pt,_t,function(){return[se]}],(function(t){return xt(se(t.data[0],vt(t.data[1])))}),5,r)}function se(t,e){let r=(Lt(t),t.subarray(2,-4));return X(r,e)}var ie=function(){function t(t){this.G=Ht,this.I=Dt,this.Z=ee,this.ondata=t}return t.prototype.push=function(t,e){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(t,e);else{if(this.p&&this.p.length){var r=new n(this.p.length+t.length);r.set(this.p),r.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var s=this,i=function(){s.ondata.apply(s,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(i):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(i):new this.Z(i),this.s.push(this.p,e),this.p=null}}},t}(),ae=function(){function t(t){this.G=qt,this.I=Ct,this.Z=re,this.ondata=t}return t.prototype.push=function(t,e){ie.prototype.push.call(this,t,e)},t}();function oe(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";return 31==t[0]&&139==t[1]&&8==t[2]?Qt(t,e,r):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Gt(t,e,r):ne(t,e,r)}function le(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?$t(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?Ut(t,e):se(t,e)}var he=function(t,e,r,s){for(var i in t){var a=t[i],o=e+i;a instanceof n?r[o]=[a,s]:Array.isArray(a)?r[o]=[a[0],lt(s,a[1])]:he(a,o+"/",r,s)}},ue="undefined"!=typeof TextEncoder&&new TextEncoder,ce="undefined"!=typeof TextDecoder&&new TextDecoder,fe=0;try{ce.decode($,{stream:!0}),fe=1}catch(Ne){}var pe=function(t){for(var e="",r=0;;){var n=t[r++],s=(n>127)+(n>223)+(n>239);if(r+s>t.length)return[e,B(t,r-1)];s?3==s?(n=((15&n)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536,e+=String.fromCharCode(55296|n>>10,56320|1023&n)):e+=1&s?String.fromCharCode((31&n)<<6|63&t[r++]):String.fromCharCode((15&n)<<12|(63&t[r++])<<6|63&t[r++]):e+=String.fromCharCode(n)}},de=function(){function t(t){this.ondata=t,fe?this.t=new TextDecoder:this.p=$}return t.prototype.push=function(t,e){if(!this.ondata)throw"no callback";if(e=!!e,this.t){if(this.ondata(this.t.decode(t,{stream:!0}),e),e){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var r=new n(this.p.length+t.length);r.set(this.p),r.set(t,this.p.length);var s=pe(r),i=s[0],a=s[1];if(e){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(i,e)}},t}(),me=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,e){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(ye(t),this.d=e||!1)},t}();function ye(t,e){if(e){for(var r=new n(t.length),s=0;s<t.length;++s)r[s]=t.charCodeAt(s);return r}if(ue)return ue.encode(t);var i=t.length,a=new n(t.length+(t.length>>1)),o=0,l=function(t){a[o++]=t};for(s=0;s<i;++s){if(o+5>a.length){var h=new n(o+8+(i-s<<1));h.set(a),a=h}var u=t.charCodeAt(s);u<128||e?l(u):u<2048?(l(192|u>>6),l(128|63&u)):u>55295&&u<57344?(u=65536+(1047552&u)|1023&t.charCodeAt(++s),l(240|u>>18),l(128|u>>12&63),l(128|u>>6&63),l(128|63&u)):(l(224|u>>12),l(128|u>>6&63),l(128|63&u))}return B(a,0,o)}function ge(t,e){if(e){for(var r="",n=0;n<t.length;n+=16384)r+=String.fromCharCode.apply(null,t.subarray(n,n+16384));return r}if(ce)return ce.decode(t);var s=pe(t),i=s[0],a=s[1];if(a.length)throw"invalid utf-8 data";return i}var _e=function(t){return 1==t?3:t<6?2:9==t?1:0},xe=function(t,e){return e+30+zt(t,e+26)+zt(t,e+28)},ve=function(t,e,r){var n=zt(t,e+28),s=ge(t.subarray(e+46,e+46+n),!(2048&zt(t,e+8))),i=e+46+n,a=Ft(t,e+20),o=r&&4294967295==a?we(t,i):[a,Ft(t,e+24),Ft(t,e+42)],l=o[0],h=o[1],u=o[2];return[zt(t,e+10),l,h,s,i+zt(t,e+30)+zt(t,e+32),u]},we=function(t,e){for(;1!=zt(t,e);e+=4+zt(t,e+2));return[St(t,e+12),St(t,e+4),St(t,e+20)]},be=function(t){var e=0;if(t)for(var r in t){var n=t[r].length;if(n>65535)throw"extra field too long";e+=n+4}return e},Me=function(t,e,r,n,s,i,a,o){var l=n.length,h=r.extra,u=o&&o.length,c=be(h);Tt(t,e,null!=a?33639248:67324752),e+=4,null!=a&&(t[e++]=20,t[e++]=r.os),t[e]=20,e+=2,t[e++]=r.flag<<1|(null==i&&8),t[e++]=s&&8,t[e++]=255&r.compression,t[e++]=r.compression>>8;var f=new Date(null==r.mtime?Date.now():r.mtime),p=f.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(Tt(t,e,p<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,null!=i&&(Tt(t,e,r.crc),Tt(t,e+4,i),Tt(t,e+8,r.size)),Tt(t,e+12,l),Tt(t,e+14,c),e+=16,null!=a&&(Tt(t,e,u),Tt(t,e+6,r.attrs),Tt(t,e+10,a),e+=14),t.set(n,e),e+=l,c)for(var d in h){var m=h[d],y=m.length;Tt(t,e,+d),Tt(t,e+2,y),t.set(m,e+4),e+=4+y}return u&&(t.set(o,e),e+=u),e},ze=function(t,e,r,n,s){Tt(t,e,101010256),Tt(t,e+8,r),Tt(t,e+10,r),Tt(t,e+12,n),Tt(t,e+16,s)},Fe=function(){function t(t){this.filename=t,this.c=it(),this.size=0,this.compression=0}return t.prototype.process=function(t,e){this.ondata(null,t,e)},t.prototype.push=function(t,e){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(t),this.size+=t.length,e&&(this.crc=this.c.d()),this.process(t,e||!1)},t}(),Se=function(){function t(t,e){var r=this;e||(e={}),Fe.call(this,t),this.d=new kt(e,(function(t,e){r.ondata(null,t,e)})),this.compression=8,this.flag=_e(e.level)}return t.prototype.process=function(t,e){try{this.d.push(t,e)}catch(Ne){this.ondata(Ne,null,e)}},t.prototype.push=function(t,e){Fe.prototype.push.call(this,t,e)},t}(),Te=function(){function t(t,e){var r=this;e||(e={}),Fe.call(this,t),this.d=new Rt(e,(function(t,e,n){r.ondata(t,e,n)})),this.compression=8,this.flag=_e(e.level),this.terminate=this.d.terminate}return t.prototype.process=function(t,e){this.d.push(t,e)},t.prototype.push=function(t,e){Fe.prototype.push.call(this,t,e)},t}(),Pe=function(){function t(t){this.ondata=t,this.u=[],this.d=1}return t.prototype.add=function(t){var e=this;if(2&this.d)throw"stream finished";var r=ye(t.filename),s=r.length,i=t.comment,a=i&&ye(i),o=s!=t.filename.length||a&&i.length!=a.length,l=s+be(t.extra)+30;if(s>65535)throw"filename too long";var h=new n(l);Me(h,0,t,r,o);var u=[h],c=function(){for(var t=0,r=u;t<r.length;t++){var n=r[t];e.ondata(null,n,!1)}u=[]},f=this.d;this.d=0;var p=this.u.length,d=lt(t,{f:r,u:o,o:a,t:function(){t.terminate&&t.terminate()},r:function(){if(c(),f){var t=e.u[p+1];t?t.r():e.d=1}f=1}}),m=0;t.ondata=function(r,s,i){if(r)e.ondata(r,s,i),e.terminate();else if(m+=s.length,u.push(s),i){var a=new n(16);Tt(a,0,134695760),Tt(a,4,t.crc),Tt(a,8,m),Tt(a,12,t.size),u.push(a),d.c=m,d.b=l+m+16,d.crc=t.crc,d.size=t.size,f&&d.r(),f=1}else f&&c()},this.u.push(d)},t.prototype.end=function(){var t=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&t.d&&(t.u.splice(-1,1),t.e())},t:function(){}}),this.d=3},t.prototype.e=function(){for(var t=0,e=0,r=0,s=0,i=this.u;s<i.length;s++){var a=i[s];r+=46+a.f.length+be(a.extra)+(a.o?a.o.length:0)}for(var o=new n(r+22),l=0,h=this.u;l<h.length;l++){a=h[l];Me(o,t,a,a.f,a.u,a.c,e,a.o),t+=46+a.f.length+be(a.extra)+(a.o?a.o.length:0),e+=a.b}ze(o,t,this.u.length,r,e),this.ondata(null,o,!0),this.d=2},t.prototype.terminate=function(){for(var t=0,e=this.u;t<e.length;t++){var r=e[t];r.t()}this.d=2},t}();function Ae(t,e,r){if(r||(r=e,e={}),"function"!=typeof r)throw"no callback";var s={};he(t,"",s,e);var i=Object.keys(s),a=i.length,o=0,l=0,h=a,u=new Array(a),c=[],f=function(){for(var t=0;t<c.length;++t)c[t]()},p=function(){var t=new n(l+22),e=o,s=l-o;l=0;for(var i=0;i<h;++i){var a=u[i];try{var c=a.c.length;Me(t,l,a,a.f,a.u,c);var f=30+a.f.length+be(a.extra),p=l+f;t.set(a.c,p),Me(t,o,a,a.f,a.u,c,l,a.m),o+=16+f+(a.m?a.m.length:0),l=p+c}catch(Ne){return r(Ne,null)}}ze(t,o,u.length,s,e),r(null,t)};a||p();for(var d=function(t){var e=i[t],n=s[e],h=n[0],d=n[1],m=it(),y=h.length;m.p(h);var g=ye(e),_=g.length,x=d.comment,v=x&&ye(x),w=v&&v.length,b=be(d.extra),M=0==d.level?0:8,z=function(n,s){if(n)f(),r(n,null);else{var i=s.length;u[t]=lt(d,{size:y,crc:m.d(),c:s,f:g,m:v,u:_!=e.length||v&&x.length!=w,compression:M}),o+=30+_+b+i,l+=76+2*(_+b)+(w||0)+i,--a||p()}};if(_>65535&&z("filename too long",null),M)if(y<16e4)try{z(null,Xt(h,d))}catch(Ne){z(Ne,null)}else c.push(Nt(h,d,z));else z(null,h)},m=0;m<h;++m)d(m);return f}function Ie(t,e){e||(e={});var r={},s=[];he(t,"",r,e);var i=0,a=0;for(var o in r){var l=r[o],h=l[0],u=l[1],c=0==u.level?0:8,f=ye(o),p=f.length,d=u.comment,m=d&&ye(d),y=m&&m.length,g=be(u.extra);if(p>65535)throw"filename too long";var _=c?Xt(h,u):h,x=_.length,v=it();v.p(h),s.push(lt(u,{size:h.length,crc:v.d(),c:_,f:f,m:m,u:p!=o.length||m&&d.length!=y,o:i,compression:c})),i+=30+p+g+x,a+=76+2*(p+g)+(y||0)+x}for(var w=new n(a+22),b=i,M=a-i,z=0;z<s.length;++z){f=s[z];Me(w,f.o,f,f.f,f.u,f.c.length);var F=30+f.f.length+be(f.extra);w.set(f.c,f.o+F),Me(w,i,f,f.f,f.u,f.c.length,f.o,f.m),i+=16+F+(f.m?f.m.length:0)}return ze(w,i,s.length,M,b),w}var Be=function(){function t(){}return t.prototype.push=function(t,e){this.ondata(null,t,e)},t.compression=0,t}(),Oe=function(){function t(){var t=this;this.i=new Dt((function(e,r){t.ondata(null,e,r)}))}return t.prototype.push=function(t,e){try{this.i.push(t,e)}catch(Ne){this.ondata(Ne,t,e)}},t.compression=8,t}(),Le=function(){function t(t,e){var r=this;e<32e4?this.i=new Dt((function(t,e){r.ondata(null,t,e)})):(this.i=new Ct((function(t,e,n){r.ondata(t,e,n)})),this.terminate=this.i.terminate)}return t.prototype.push=function(t,e){this.i.terminate&&(t=B(t,0)),this.i.push(t,e)},t.compression=8,t}(),Ee=function(){function t(t){this.onfile=t,this.k=[],this.o={0:Be},this.p=$}return t.prototype.push=function(t,e){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var s=Math.min(this.c,t.length),i=t.subarray(0,s);if(this.c-=s,this.d?this.d.push(i,!this.c):this.k[0].push(i),t=t.subarray(s),t.length)return this.push(t,e)}else{var a=0,o=0,l=void 0,h=void 0;this.p.length?t.length?(h=new n(this.p.length+t.length),h.set(this.p),h.set(t,this.p.length)):h=this.p:h=t;for(var u=h.length,c=this.c,f=c&&this.d,p=function(){var t,e=Ft(h,o);if(67324752==e){a=1,l=o,d.d=null,d.c=0;var n=zt(h,o+6),s=zt(h,o+8),i=2048&n,f=8&n,p=zt(h,o+26),m=zt(h,o+28);if(u>o+30+p+m){var y=[];d.k.unshift(y),a=2;var g,_=Ft(h,o+18),x=Ft(h,o+22),v=ge(h.subarray(o+30,o+=30+p),!i);4294967295==_?(t=f?[-2]:we(h,o),_=t[0],x=t[1]):f&&(_=-1),o+=m,d.c=_;var w={name:v,compression:s,start:function(){if(!w.ondata)throw"no callback";if(_){var t=r.o[s];if(!t)throw"unknown compression type "+s;g=_<0?new t(v):new t(v,_,x),g.ondata=function(t,e,r){w.ondata(t,e,r)};for(var e=0,n=y;e<n.length;e++){var i=n[e];g.push(i,!1)}r.k[0]==y&&r.c?r.d=g:g.push($,!0)}else w.ondata(null,$,!0)},terminate:function(){g&&g.terminate&&g.terminate()}};_>=0&&(w.size=_,w.originalSize=x),d.onfile(w)}return"break"}if(c){if(134695760==e)return l=o+=12+(-2==c&&8),a=3,d.c=0,"break";if(33639248==e)return l=o-=4,a=3,d.c=0,"break"}},d=this;o<u-4;++o){var m=p();if("break"===m)break}if(this.p=$,c<0){var y=a?h.subarray(0,l-12-(-2==c&&8)-(134695760==Ft(h,l-16)&&4)):h.subarray(0,o);f?f.push(y,!!a):this.k[+(2==a)].push(y)}if(2&a)return this.push(h.subarray(o),e);this.p=h.subarray(o)}if(e){if(this.c)throw"invalid zip file";this.p=null}},t.prototype.register=function(t){this.o[t.compression]=t},t}();function ke(t,e){if("function"!=typeof e)throw"no callback";for(var r=[],s=function(){for(var t=0;t<r.length;++t)r[t]()},i={},a=t.length-22;101010256!=Ft(t,a);--a)if(!a||t.length-a>65558)return void e("invalid zip file",null);var o=zt(t,a+8);o||e(null,{});var l=o,h=Ft(t,a+16),u=4294967295==h;if(u){if(a=Ft(t,a-12),101075792!=Ft(t,a))return void e("invalid zip file",null);l=o=Ft(t,a+32),h=Ft(t,a+48)}for(var c=function(l){var c=ve(t,h,u),f=c[0],p=c[1],d=c[2],m=c[3],y=c[4],g=c[5],_=xe(t,g);h=y;var x=function(t,r){t?(s(),e(t,null)):(i[m]=r,--o||e(null,i))};if(f)if(8==f){var v=t.subarray(_,_+p);if(p<32e4)try{x(null,Ut(v,new n(d)))}catch(a){x(a,null)}else r.push(Gt(v,{size:d},x))}else x("unknown compression type "+f,null);else x(null,B(t,_,_+p))},f=0;f<l;++f)c(f);return s}function Re(t){for(var e={},r=t.length-22;101010256!=Ft(t,r);--r)if(!r||t.length-r>65558)throw"invalid zip file";var s=zt(t,r+8);if(!s)return{};var i=Ft(t,r+16),a=4294967295==i;if(a){if(r=Ft(t,r-12),101075792!=Ft(t,r))throw"invalid zip file";s=Ft(t,r+32),i=Ft(t,r+48)}for(var o=0;o<s;++o){var l=ve(t,i,a),h=l[0],u=l[1],c=l[2],f=l[3],p=l[4],d=l[5],m=xe(t,d);if(i=p,h){if(8!=h)throw"unknown compression type "+h;e[f]=Ut(t.subarray(m,m+u),new n(c))}else e[f]=B(t,m,m+u)}return e}},"9d01":function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["None"]=0]="None",t[t["Running"]=20]="Running",t[t["Finish"]=21]="Finish"}(n||(n={})),e.TransST=n;class s{static Build(t,e,r,n){return(t<<24)+(e<<16)+(r<<8)+n}static ModifyTransStatus(t,e){return t&=4294967040,t+e}static GetTransStatus(t){return t&=255,t}}e.ThreadWFST=s},"9e66":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("3a68"),s=r("026b"),i=r("9d01");class a extends n.BaseTaskInThread{constructor(){super(),this.m_parser={}}receiveData(t){let e=new s.FBXBufferLoader;e.parseBufBySteps(t.streams[0],t.descriptor.url,(e,r,n,s,a)=>{let o=n+1<s?i.TransST.Running:i.TransST.Finish;t.wfst=i.ThreadWFST.ModifyTransStatus(t.wfst,o);let l=[];null!=e.indices&&l.push(e.indices.buffer),null!=e.vertices&&l.push(e.vertices.buffer),null!=e.uvsList&&l.push(e.uvsList[0].buffer),null!=e.normals&&l.push(e.normals.buffer);let h={models:[e],transform:r.transform.getLocalFS32(),index:n,total:s};l.push(h.transform.buffer),t.data=h,l.length>0?this.postMessageToThread(t,l):this.postMessageToThread(t)})}}e.ModuleFBXGeomFastParser=a;new a},a053:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(r("6e01")),i=r("cc7a"),a=n(r("18c7")),o=r("ac89"),l=new a.default,h=new o.Quaternion;class u{constructor(t=0,e=0,r=0,n=u.DefaultOrder){this.x=t,this.y=e,this.z=r,this.order=n}set(t,e,r,n=this.order){return this.x=t,this.y=e,this.z=r,this.order=n,this}clone(){return new u(this.x,this.y,this.z,this.order)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.order=t.order,this}setFromRotationMatrix(t,e=this.order,r=!0){const n=t.getLocalFS32(),a=n[0],o=n[4],l=n[8],h=n[1],u=n[5],c=n[9],f=n[2],p=n[6],d=n[10];let m=s.default.Clamp;switch(e){case i.EulerOrder.XYZ:this.y=Math.asin(m(l,-1,1)),Math.abs(l)<.9999999?(this.x=Math.atan2(-c,d),this.z=Math.atan2(-o,a)):(this.x=Math.atan2(p,u),this.z=0);break;case i.EulerOrder.YXZ:this.x=Math.asin(-m(c,-1,1)),Math.abs(c)<.9999999?(this.y=Math.atan2(l,d),this.z=Math.atan2(h,u)):(this.y=Math.atan2(-f,a),this.z=0);break;case i.EulerOrder.ZXY:this.x=Math.asin(m(p,-1,1)),Math.abs(p)<.9999999?(this.y=Math.atan2(-f,d),this.z=Math.atan2(-o,u)):(this.y=0,this.z=Math.atan2(h,a));break;case i.EulerOrder.ZYX:this.y=Math.asin(-m(f,-1,1)),Math.abs(f)<.9999999?(this.x=Math.atan2(p,d),this.z=Math.atan2(h,a)):(this.x=0,this.z=Math.atan2(-o,u));break;case i.EulerOrder.YZX:this.z=Math.asin(m(h,-1,1)),Math.abs(h)<.9999999?(this.x=Math.atan2(-c,u),this.y=Math.atan2(-f,a)):(this.x=0,this.y=Math.atan2(l,d));break;case i.EulerOrder.XZY:this.z=Math.asin(-m(o,-1,1)),Math.abs(o)<.9999999?(this.x=Math.atan2(p,u),this.y=Math.atan2(l,a)):(this.x=Math.atan2(-c,d),this.y=0);break;default:}return this.order=e,this}setFromQuaternion(t,e,r=!0){return l.makeRotationFromQuaternion(t),this.setFromRotationMatrix(l,e,r)}setFromVector3(t,e=this.order){return this.set(t.x,t.y,t.z,e)}reorder(t){return h.setFromEuler(this),this.setFromQuaternion(h,t)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.order===this.order}fromArray(t){return this.x=t[0],this.y=t[1],this.z=t[2],void 0!==t[3]&&(this.order=t[3]),this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.order,t}}u.DefaultOrder=i.EulerOrder.XYZ,e.Euler=u},abdb:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{}n.AXIS_ANGLE=0,n.QUATERNION=1,n.EULER_ANGLES=2,e.default=n},ac89:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=r("cc7a"),i=n(r("6e01"));class a{constructor(t=0,e=0,r=0,n=1){this.isQuaternion=!0,this.x=t,this.y=e,this.z=r,this.w=n}static Slerp(t,e,r,n){return r.slerpQuaternions(t,e,n)}static SlerpFlat(t,e,r,n){let s=e.x,i=e.y,a=e.z,o=e.w;const l=r.x,h=r.y,u=r.z,c=r.w;if(0===n)return t.x=s,t.y=i,t.z=a,void(t.w=o);if(1===n)return t.x=l,t.y=h,t.z=u,void(t.w=c);if(o!==c||s!==l||i!==h||a!==u){let t=1-n;const e=s*l+i*h+a*u+o*c,r=e>=0?1:-1,f=1-e*e;if(f>Number.EPSILON){const s=Math.sqrt(f),i=Math.atan2(s,e*r);t=Math.sin(t*i)/s,n=Math.sin(n*i)/s}const p=n*r;if(s=s*t+l*p,i=i*t+h*p,a=a*t+u*p,o=o*t+c*p,t===1-n){const t=1/Math.sqrt(s*s+i*i+a*a+o*o);s*=t,i*=t,a*=t,o*=t}}t.x=s,t.y=i,t.z=a,t.w=o}set(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this}clone(){return new a(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}setFromEuler(t,e=!0){if(null==t)throw new Error("Quaternion::setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=t.x,n=t.y,i=t.z,a=t.order,o=Math.cos,l=Math.sin,h=o(r/2),u=o(n/2),c=o(i/2),f=l(r/2),p=l(n/2),d=l(i/2);switch(a){case s.EulerOrder.XYZ:this.x=f*u*c+h*p*d,this.y=h*p*c-f*u*d,this.z=h*u*d+f*p*c,this.w=h*u*c-f*p*d;break;case s.EulerOrder.YXZ:this.x=f*u*c+h*p*d,this.y=h*p*c-f*u*d,this.z=h*u*d-f*p*c,this.w=h*u*c+f*p*d;break;case s.EulerOrder.ZXY:this.x=f*u*c-h*p*d,this.y=h*p*c+f*u*d,this.z=h*u*d+f*p*c,this.w=h*u*c-f*p*d;break;case s.EulerOrder.ZYX:this.x=f*u*c-h*p*d,this.y=h*p*c+f*u*d,this.z=h*u*d-f*p*c,this.w=h*u*c+f*p*d;break;case s.EulerOrder.YZX:this.x=f*u*c+h*p*d,this.y=h*p*c+f*u*d,this.z=h*u*d-f*p*c,this.w=h*u*c-f*p*d;break;case s.EulerOrder.XZY:this.x=f*u*c-h*p*d,this.y=h*p*c-f*u*d,this.z=h*u*d+f*p*c,this.w=h*u*c+f*p*d;break;default:}return this}setFromAxisAngle(t,e){const r=e/2,n=Math.sin(r);return this.x=t.x*n,this.y=t.y*n,this.z=t.z*n,this.w=Math.cos(r),this}setFromRotationMatrix(t){const e=t.getLocalFS32(),r=e[0],n=e[4],s=e[8],i=e[1],a=e[5],o=e[9],l=e[2],h=e[6],u=e[10],c=r+a+u;if(c>0){const t=.5/Math.sqrt(c+1);this.w=.25/t,this.x=(h-o)*t,this.y=(s-l)*t,this.z=(i-n)*t}else if(r>a&&r>u){const t=2*Math.sqrt(1+r-a-u);this.w=(h-o)/t,this.x=.25*t,this.y=(n+i)/t,this.z=(s+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-r-u);this.w=(s-l)/t,this.x=(n+i)/t,this.y=.25*t,this.z=(o+h)/t}else{const t=2*Math.sqrt(1+u-r-a);this.w=(i-n)/t,this.x=(s+l)/t,this.y=(o+h)/t,this.z=.25*t}return this}setFromUnitVectors(t,e){let r=t.dot(e)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this.x=-t.y,this.y=t.x,this.z=0,this.w=r):(this.x=0,this.y=-t.z,this.z=t.y,this.w=r)):(this.x=t.y*e.z-t.z*e.y,this.y=t.z*e.x-t.x*e.z,this.z=t.x*e.y-t.y*e.x,this.w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(i.default.Clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const r=this.angleTo(t);if(0===r)return this;const n=Math.min(1,e/r);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}normalize(){let t=this.length();return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}multiply(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const r=t.x,n=t.y,s=t.z,i=t.w,a=e.x,o=e.y,l=e.z,h=e.w;return this.x=r*h+i*a+n*l-s*o,this.y=n*h+i*o+s*a-r*l,this.z=s*h+i*l+r*o-n*a,this.w=i*h-r*a-n*o-s*l,this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const r=this.x,n=this.y,s=this.z,i=this.w;let a=i*t.w+r*t.x+n*t.y+s*t.z;if(a<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,a=-a):this.copy(t),a>=1)return this.w=i,this.x=r,this.y=n,this.z=s,this;const o=1-a*a;if(o<=Number.EPSILON){const t=1-e;return this.w=t*i+e*this.w,this.x=t*r+e*this.x,this.y=t*n+e*this.y,this.z=t*s+e*this.z,this.normalize(),this}const l=Math.sqrt(o),h=Math.atan2(l,a),u=Math.sin((1-e)*h)/l,c=Math.sin(e*h)/l;return this.w=i*u+this.w*c,this.x=r*u+this.x*c,this.y=n*u+this.y*c,this.z=s*u+this.z*c,this}slerpQuaternions(t,e,r){return this.copy(t).slerp(e,r)}random(){const t=Math.random(),e=Math.sqrt(1-t),r=Math.sqrt(t),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(n),r*Math.sin(s),r*Math.cos(s),e*Math.sin(n))}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e=0){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}e.Quaternion=a},c758:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e["default"]=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=r("f7ee"),i=n(r("9cb6"));class a{constructor(){this.ppFlag=0,this.encoding=0,this.ppType=""}parseDirec(t,e){if(e.length<1)return[];let r=e[0],n=e[1],a=e[2],o=e[3],l=e[4];switch(t.setOffset(r),l){case"b":case"c":case"d":case"f":case"i":case"l":if(0===o)switch(l){case"b":case"c":return t.getBooleanArray(a);case"d":return t.getFloat64Array(a);case"f":return t.getFloat32Array(a);case"i":return t.getInt32Array(a);case"l":return t.getInt64Array(a)}let e=t.getArrayU8Buffer(n);const r=i.unzlibSync(e,null);let h=new s.BinaryReader(r.buffer);switch(l){case"b":case"c":return h.getBooleanArray(a);case"d":return h.getFloat64Array(a);case"f":return h.getFloat32Array(a);case"i":return h.getInt32Array(a);case"l":return h.getInt64Array(a)}default:throw new Error("BufPropertyParser::parseDirec() Unknown property type "+l)}}getArrayByteLength(t,e){switch(t){case"d":case"l":return 8*e;case"f":case"i":return 4*e;default:break}return e}parseProperty(t){const e=t.getString(1);let r;switch(this.encoding=0,this.ppType=e,e){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return r=t.getUint32(),t.getArrayBuffer(r);case"S":return r=t.getUint32(),t.getString(r);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=t.getUint32(),a=t.getUint32(),o=t.getUint32();this.encoding=a;let l=t.getOffset(),h=0===a?this.getArrayByteLength(e,n):o;if(12==this.ppFlag)return t.skip(h),[l,o,n,a,e];if(131==this.ppFlag)return t.skip(h),[];if(0===a)switch(e){case"b":case"c":return t.getBooleanArray(n);case"d":return t.getFloat64Array(n);case"f":return t.getFloat32Array(n);case"i":return t.getInt32Array(n);case"l":return t.getInt64Array(n)}let u=t.getArrayU8Buffer(o);const c=i.unzlibSync(u,null);let f=new s.BinaryReader(c.buffer);switch(e){case"b":case"c":return f.getBooleanArray(n);case"d":return f.getFloat64Array(n);case"f":return f.getFloat32Array(n);case"i":return f.getInt32Array(n);case"l":return f.getInt64Array(n)}default:throw new Error("BufPropertyParser::parseProperty() Unknown property type "+e)}}}e.BufPropertyParser=a},cc7a:function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["XYZ"]=0]="XYZ",t[t["YZX"]=1]="YZX",t[t["ZXY"]=2]="ZXY",t[t["XZY"]=3]="XZY",t[t["YXZ"]=4]="YXZ",t[t["ZYX"]=5]="ZYX"}(n||(n={})),e.EulerOrder=n},f689:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(r("8e17")),i=n(r("6e01")),a=r("a053"),o=n(r("18c7")),l=r("0063");function h(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=t.byteLength),l.LoaderUtils.decodeText(new Uint8Array(t,e,r))}function u(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function n(e){const n=t[e-1];return t=t.slice(r+e),r++,n}for(let s=0;s<e.length;++s){const t=n(1);if(t===e[s])return!1}return!0}function c(t){const e=/FBXVersion: (\d+)/,r=t.match(e);if(r){const t=parseInt(r[1]);return t}throw new Error("FBXLoader: Cannot find the version number for the file given.")}e.convertArrayBufferToString=h,e.isFbxFormatASCII=u,e.getFbxVersion=c;let f=new s.default,p=new a.Euler;function d(t){const e=new o.default,r=new o.default,n=new o.default,a=new o.default,l=new o.default,h=new o.default,u=new o.default,c=new o.default,d=new o.default,m=new o.default,y=new o.default,g=new o.default;let _=i.default.DegreeToRadian;const x=t.inheritType?t.inheritType:0;if(t.translation&&e.setTranslation(f.fromArray(t.translation)),t.preRotation){const e=t.preRotation.map(_);e.push(t.eulerOrder),r.makeRotationFromEuler(p.fromArray(e))}if(t.rotation){const e=t.rotation.map(_);e.push(t.eulerOrder),n.makeRotationFromEuler(p.fromArray(e))}if(t.postRotation){const e=t.postRotation.map(_);e.push(t.eulerOrder),a.makeRotationFromEuler(p.fromArray(e)),a.invert()}t.scale&&l.setScale(f.fromArray(t.scale)),t.scalingOffset&&u.setTranslation(f.fromArray(t.scalingOffset)),t.scalingPivot&&h.setTranslation(f.fromArray(t.scalingPivot)),t.rotationOffset&&c.setTranslation(f.fromArray(t.rotationOffset)),t.rotationPivot&&d.setTranslation(f.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(y.copy(t.parentMatrix),m.copy(t.parentMatrixWorld));const v=r.clone().multiply(n).multiply(a),w=new o.default;w.extractRotation(m);const b=new o.default;b.copyTranslation(m);const M=b.clone().invertThis().multiply(m),z=w.clone().invertThis().multiply(M),F=l,S=new o.default;if(0===x)S.copy(w).multiply(v).multiply(z).multiply(F);else if(1===x)S.copy(w).multiply(z).multiply(v).multiply(F);else{let t=new s.default;y.getScale(t);const e=(new o.default).setScale(t),r=e.clone().invertThis(),n=z.clone().multiply(r);S.copy(w).multiply(v).multiply(n).multiply(F)}const T=d.clone().invertThis(),P=h.clone().invertThis();let A=e.clone().multiply(c).multiply(d).multiply(r).multiply(n).multiply(a).multiply(T).multiply(u).multiply(h).multiply(l).multiply(P);const I=(new o.default).copyTranslation(A),B=m.clone().multiply(I);return g.copyTranslation(B),A=g.clone().multiply(S),A.premultiply(m.invertThis()),A}e.generateTransform=d;const m=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];function y(t){return t=t||0,6===t?m[0]:m[t]}function g(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===h(t,0,e.length)}function _(t){return t/46186158e3}function x(t){const e=t.split(",").map((function(t){return parseFloat(t)}));return e}function v(t,e){for(let r=0,n=t.length,s=e.length;r<s;r++,n++)t[n]=e[r]}e.getEulerOrder=y,e.isFbxFormatBinary=g,e.convertFBXTimeToSeconds=_,e.parseNumberArray=x,e.append=v;const w=new Array(1024);function b(t,e,r,n){for(let s=r,i=0;s<n;s++,i++)t[i]=e[s];return t}function M(t,e,r,n){let s;switch(n.mappingType){case"ByPolygonVertex":s=t;break;case"ByPolygon":s=e;break;case"ByVertice":s=r;break;case"AllSame":s=n.indices[0];break;default:}"IndexToDirect"===n.referenceType&&(s=n.indices[s]);const i=s*n.dataSize,a=i+n.dataSize;return b(w,n.buffer,i,a)}e.slice=b,e.getData=M},f7ee:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("0063");class s{constructor(t,e){this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===e||e}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}setOffset(t){this.offset=t}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=this.getBoolean();return e}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=this.getInt32();return e}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),2147483648&e?(e=4294967295&~e,t=4294967295&~t,4294967295===t&&(e=e+1&4294967295),t=t+1&4294967295,-(4294967296*e+t)):4294967296*e+t}getInt64Array(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=this.getInt64();return e}getUint64(){let t,e;return this.littleEndian?(t=this.getUint32(),e=this.getUint32()):(e=this.getUint32(),t=this.getUint32()),4294967296*e+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=this.getFloat32();return e}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const e=new Array(t);for(let r=0;r<t;r++)e[r]=this.getFloat64();return e}getArrayBuffer(t){const e=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}getArrayU8Buffer(t){let e=new Uint8Array(this.dv.buffer);const r=e.subarray(this.offset,this.offset+t);return this.offset+=t,r}getArrayU8BufferByOffset(t,e){let r=new Uint8Array(this.dv.buffer);return r.subarray(t,t+e)}getString(t){let e=new Array(t);for(let n=0;n<t;n++)e[n]=this.getUint8();const r=e.indexOf(0);return r>=0&&(e=e.slice(0,r)),n.LoaderUtils.decodeText(new Uint8Array(e))}}e.BinaryReader=s},fae3:function(t,e,r){"use strict";r.r(e);r("1eb2");var n=r("9e66");for(var s in n)["default"].indexOf(s)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(s)}})}));